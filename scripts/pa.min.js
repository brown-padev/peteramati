!function(){"use strict";function t(t){return document.getElementById(t)}function e(t){if("string"==typeof t)return t;if(t){var e,a,n=[];for(e in t)null!=(a=t[e])&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(a));return n.join("&")}return""}var a,n,r,s,o,l,u;function d(t){if(this.state=-1,this.c=[],t)try{t(this._resolver(1),this._resolver(0))}catch(t){this._resolver(0)(t)}}function h(t,e,a){!e&&t instanceof Error?t={error:(e=t).toString()}:"string"==typeof t&&(t={error:t}),e&&e.fileName&&!t.url&&(t.url=e.fileName),e&&e.lineNumber&&!t.lineno&&(t.lineno=e.lineNumber),e&&e.columnNumber&&!t.colno&&(t.colno=e.columnNumber),e&&e.stack&&(t.stack=e.stack),$.ajax(E("api/jserror"),{global:!1,method:"POST",cache:!1,data:t}),e&&!a&&"object"==typeof console&&console.error&&console.error(t.error)}window.JSON&&window.JSON.parse||(window.JSON={parse:$.parseJSON}),"classList"in document.createElement("span")&&!/MSIE|rv:11\.0/.test(navigator.userAgent||"")?(a=function(t,e){var a=t.classList;return a&&a.contains(e)},n=function(t,e){t.classList.add(e)},r=function(t,e){t.classList.remove(e)},s=function(t,e,a){t.classList.toggle(e,a)},o=function(t){return t.classList}):(a=function(t,e){return $(t).hasClass(e)},n=function(t,e){$(t).addClass(e)},r=function(t,e){$(t).removeClass(e)},s=function(t,e,a){$(t).toggleClass(e,a)},o=function(t){var e=$.trim(t.className);return""===e?[]:e.split(/\s+/)}),Element.prototype.closest||(Element.prototype.closest=function(t){return $(this).closest(t)[0]}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=!e||e<0?0:+e,this.substring(e,e+t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),String.prototype.trimStart||(String.prototype.trimStart=function(){return this.replace(/^[\s\uFEFF\xA0]+/,"")}),d.prototype._resolver=function(t){var e=this;return function(a){-1===e.state&&(e.state=t,e.value=a,e._resolve())}},d.prototype.then=function(t,e){var a=new d;return this.c.push([e,t,a]),0!==this.state&&1!==this.state||this._resolve(),a},d.prototype._resolve=function(){var t,e,a,n,i,r=this.state;for(t in this.state=2,this.c){if(e=this.c[t],a=r,n=this.value,i=e[a],$.isFunction(i))try{n=i(n)}catch(t){a=0,n=t}e[2]._resolver(a)(n)}this.c=[],this.state=r},d.resolve=function(t){var e=new d;return e.value=t,e.state=1,e},d.reject=function(t){var e=new d;return e.value=t,e.state=0,e},l=window.onerror,u=0,window.onerror=function(t,e,a,n,i){if((e||!a)&&++u<=10){var r={error:t,url:e,lineno:a};n&&(r.colno=n),h(r,i,!0)}return!!l&&l.apply(this,arguments)};var c,p,f,g=(c=0,p=[],$(document).ajaxError((function(t,e,a,n){if(4==e.readyState){var i;if(e.responseText&&"{"===e.responseText.charAt(0))try{i=JSON.parse(e.responseText)}catch(t){}if(!i||!i.user_error){var r=L(a.url)+" API failure: ";siteinfo.user&&siteinfo.user.email&&(r+="user "+siteinfo.user.email+", "),r+=e.status,n&&(r+=", "+n),e.responseText&&(r+=", "+e.responseText.substring(0,100)),h(r)}}})),$(document).ajaxComplete((function(t,e,a){if(a.trackOutstanding&&0==--c)for(;p.length;)p.shift()()})),$.ajaxPrefilter((function(t,e,a){if(!1!==t.global){var n=t.success;t.error?$.isArray(t.error)?t.error.push(i):t.error=[t.error,i]:t.error=i,null==t.timeout&&(t.timeout=1e4),null==t.dataType&&(t.dataType="json"),t.trackOutstanding&&++c}function i(t,e,a){if(n){var i;if(/application\/json/.test(t.getResponseHeader("Content-Type")||"")&&t.responseText)try{i=JSON.parse(t.responseText)}catch(t){}i&&"object"==typeof i&&!1===i.ok||(i={ok:!1}),i.error||(i.error=function(t,e,a){return"parsererror"===e?"Internal error: bad response from server.":a?a.toString():"timeout"===e?"Connection timed out.":e?"Failed ["+e+"].":"Failed."}(0,e,a)),n(i,t,e)}}})),function(t){if(void 0===t)return c>0;c>0?p.push(t):t()});jQuery.fn.extend({geometry:function(t){var e,a;if(this[0]==window)e={left:this.scrollLeft(),top:this.scrollTop()};else{if(1==this.length&&this[0].getBoundingClientRect)return e=jQuery.extend({},this[0].getBoundingClientRect()),(a=window.pageXOffset)&&(e.left+=a,e.right+=a),(a=window.pageYOffset)&&(e.top+=a,e.bottom+=a),"width"in e||(e.width=e.right-e.left,e.height=e.bottom-e.top),e;e=this.offset()}return e&&(e.width=t?this.outerWidth():this.width(),e.height=t?this.outerHeight():this.height(),e.right=e.left+e.width,e.bottom=e.top+e.height),e},scrollIntoView:function(t){t=t||{};for(var e=0;e!==this.length;++e){for(var a=$(this[e]).geometry(),n=this[e].parentNode;n&&n.tagName&&"visible"===$(n).css("overflow-y");)n=n.parentNode;n=n&&n.tagName?n:window;var i=$(n).geometry();if(a.top<i.top+(t.marginTop||0)||t.atTop){var r=Math.max(a.top-(t.marginTop||0),0);n===window?n.scrollTo(n.scrollX,r):n.scrollTop=r}else if(a.bottom>i.bottom-(t.marginBottom||0)){r=Math.max(a.bottom+(t.marginBottom||0)-i.height,0);n===window?n.scrollTo(n.scrollX,r):n.scrollTop=r}}return this}}),f="pushState"in window.history?function(t){var e;return history.state||(e={href:location.href},$(document).trigger("collectState",[e]),history.replaceState(e,document.title,e.href)),t&&(e={href:t},$(document).trigger("collectState",[e]),history.pushState(e,document.title,e.href)),!0}:function(){return!1};var m,v,b=(m=/[&<>\"']/g,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null===t||"number"==typeof t?t:t.replace(m,(function(t){return v[t]}))});function x(t,e){return t===e||(t=(null==t?"":t).replace(/\r\n?/g,"\n"))===(e=(null==e?"":e).replace(/\r\n?/g,"\n"))}function y(t){return encodeURIComponent(t).replace(/[^-A-Za-z0-9%]/g,(function(t){return"_"+t.charCodeAt(0).toString(16)})).replace(/%../g,(function(t){return"_"+t.substr(1).toLowerCase()}))}function w(t){var e,a,n,i,r,s,o=t.split(/(%(?:%|-?(?:\d*|\*?)(?:\.\d*)?[sdefgroxX]))/),l="";for(e=0,i=1;e!=o.length;++e)if("%"!=(a=o[e]).charAt(0))l+=a;else if("%"==a.charAt(1))l+="%";else{if(n=arguments[i],++i,"*"==(r=a.match(/^%(-?)(\d*|\*?)(?:|[.](\d*))(\w)/))[2]&&(r[2]=n.toString(),n=arguments[i],++i),r[4]>="e"&&r[4]<="g"&&null==r[3]&&(r[3]=6),"g"===r[4]?n=(n=Number(n).toPrecision(r[3]).toString()).replace(/\.(\d*[1-9])?0+(|e.*)$/,(function(t,e,a){return(null==e?"":"."+e)+a})):"f"===r[4]?n=Number(n).toFixed(r[3]):"e"===r[4]?n=Number(n).toExponential(r[3]):"r"===r[4]?(n=Number(n).toFixed(+(r[3]||0)),+(r[3]||0)&&(n=n.replace(/\.?0*$/,""))):"d"===r[4]?n=Math.floor(n):"o"===r[4]?n=Math.floor(n).toString(8):"x"===r[4]?n=Math.floor(n).toString(16):"X"===r[4]&&(n=Math.floor(n).toString(16).toUpperCase()),n=n.toString(),""!==r[2]&&"0"!==r[2])for(s="0"===r[2].charAt(0)?"0":" ";n.length<parseInt(r[2],10);)n=r[1]?n+s:s+n;l+=n}return l}function A(){return(new Date).getTime()}function _(){return A()/1e3}var k=function(){function t(t,e,a){return(e+=t.toString()).length<=a?e:e.substring(e.length-a)}function e(t,e,a){return a&&e&&!t.getSeconds()?n("%H:%M",t):a?n("%H:%M:%S",t):e&&t.getSeconds()?n("%#l:%M:%S%P",t):e&&t.getMinutes()?n("%#l:%M%P",t):n(e?"%#l%P":"%I:%M:%S %p",t)}var a={a:function(t){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]},A:function(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]},d:function(e){return t(e.getDate(),"0",2)},e:function(e,a){return t(e.getDate(),a?"":" ",2)},u:function(t){return t.getDay()||7},w:function(t){return t.getDay()},b:function(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]},B:function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]},h:function(t){return a.b(t)},m:function(e){return t(e.getMonth()+1,"0",2)},y:function(t){return t.getFullYear()%100},Y:function(t){return t.getFullYear()},H:function(e){return t(e.getHours(),"0",2)},k:function(e,a){return t(e.getHours(),a?"":" ",2)},I:function(e){return t(e.getHours()%12||12,"0",2)},l:function(e,a){return t(e.getHours()%12||12,a?"":" ",2)},M:function(e){return t(e.getMinutes(),"0",2)},X:function(t){return n("%#e %b %Y %#q",t)},p:function(t){return t.getHours()<12?"AM":"PM"},P:function(t){return t.getHours()<12?"am":"pm"},q:function(t,a){return e(t,a,n.is24)},r:function(t,a){return e(t,a,!1)},R:function(t,a){return e(t,a,!0)},S:function(e){return t(e.getSeconds(),"0",2)},T:function(t){return n("%H:%M:%S",t)},D:function(t){return n("%m/%d/%y",t)},F:function(t){return n("%Y-%m-%d",t)},s:function(t){return Math.floor(t.getTime()/1e3)},n:function(t){return"\n"},t:function(t){return"\t"},"%":function(t){return"%"}};function n(t,e){var n,i,r,s,o=t.split(/(%#?\S)/),l="";for(null==e?e=new Date:"number"==typeof e&&(e=new Date(1e3*e)),n=0;n!=o.length;++n)r="#"==(i=o[n]).charAt(1),"%"==i.charAt(0)&&(s=a[i.charAt(1+r)])?l+=s(e,r):l+=i;return l}return n}(),C=function(){var t={Spacebar:" ",Esc:"Escape"},e={9:"Tab",13:"Enter",27:"Escape"},n={9:"Tab",13:"Enter",16:"ShiftLeft",17:"ControlLeft",18:"AltLeft",20:"CapsLock",27:"Escape",33:"PageUp",34:"PageDown",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",91:"OSLeft",92:"OSRight",93:"OSRight",224:"OSLeft",225:"AltRight"},i={Alt:2,AltLeft:2,AltRight:2,CapsLock:2,Control:2,ControlLeft:2,ControlRight:2,Meta:2,OSLeft:2,OSRight:2,Shift:2,ShiftLeft:2,ShiftRight:2,ArrowLeft:1,ArrowRight:1,ArrowUp:1,ArrowDown:1,Backspace:1,Enter:1,Escape:1,PageUp:1,PageDown:1,Tab:1};function r(a){var i;return"string"==typeof a?a:null!=(i=a.key)?t[i]||i:(i=a.charCode)?e[i]||String.fromCharCode(i):(i=a.keyCode)?n[i]?n[i]:i>=48&&i<=57||i>=65&&i<=90?String.fromCharCode(i):void 0:""}return r.printable=function(t){return!(i[r(t)]||"string"!=typeof t&&(t.ctrlKey||t.metaKey))},r.modifier=function(t){return i[r(t)]>1},r.is_default_a=function(t,e){return!(t.shiftKey||t.metaKey||t.ctrlKey||0!=t.button||e&&a("ui",e))},r}();function M(t){return(t.shiftKey?1:0)+(t.ctrlKey?2:0)+(t.altKey?4:0)+(t.metaKey?8:0)}M.SHIFT=1,M.CTRL=2,M.ALT=4,M.META=8;var S=function(){return!1};try{window.localStorage&&window.JSON&&(S=function(t,e,a){try{var n=t?window.sessionStorage:window.localStorage;return void 0===e?!!n:void 0===a?n.getItem(e):null===a?n.removeItem(e):"object"==typeof a?n.setItem(e,JSON.stringify(a)):n.setItem(e,a)}catch(t){return!1}})}catch(t){}function T(t,e,a){if(!1!==t.first&&t.v.length){for(var n=0;n<t.v.length;++n){var i=e.exec(t.v[n]);if(i)return t.pt+=a+i[1]+"/",t.v.splice(n,1),void(t.first=i[1])}t.first=!1}}function N(t,e){if(!1!==t.last&&t.v.length){for(var a=0;a<t.v.length;++a){var n=e.exec(t.v[a]);if(n)return t.t+="/"+n[1],t.v.splice(a,1),void(t.last=n[1])}t.last=!1}}function j(t,a){var n,i,r,s,o="";if(null!=siteinfo.site_relative&&null!=siteinfo.suffix||(siteinfo.site_relative=siteinfo.suffix="",h("missing siteinfo")),s={pt:"",t:t+siteinfo.suffix},"string"==typeof a)(r=a.match(/^(.*?)(#.*)$/))&&(a=r[1],o=r[2]),s.v=a.split(/&/);else for(n in s.v=[],a)null==(i=a[n])||("anchor"===n?o="#"+i:s.v.push(encodeURIComponent(n)+"="+encodeURIComponent(i)));return"help"===t?N(s,/^t=(\w+)$/):"api"===t.substr(0,3)?(t.length>3&&(s.t="api"+siteinfo.suffix,s.v.push("fn="+t.substr(4))),T(s,/^u=([^?&#]+)$/,"~"),N(s,/^fn=(\w+)$/),N(s,/^pset=([^?&#]+)$/),N(s,/^commit=([0-9A-Fa-f]+)$/)):"index"===t?T(s,/^u=([^?&#]+)$/,"~"):"pset"!==t&&"run"!==t||(T(s,/^u=([^?&#]+)$/,"~"),N(s,/^pset=([^?&#]+)$/),N(s,/^commit=([0-9A-Fa-f]+)$/)),siteinfo.defaults&&s.v.push(e(siteinfo.defaults)),s.v.length&&(s.t+="?"+s.v.join("&")),siteinfo.site_relative+s.pt+s.t+o}function E(t,a){return a=e(a),j(t,a+=(a?"&":"")+"post="+siteinfo.postvalue)}function L(t,e){var a,n="";if(e=e||window.location.href,!/^\w+:\/\//.test(t)&&(a=e.match(/^(\w+:)/))&&(n=a[1]),n&&!/^\/\//.test(t)&&(a=e.match(/^\w+:(\/\/[^\/]+)/))&&(n+=a[1]),n&&!/^\//.test(t)&&(a=e.match(/^\w+:\/\/[^\/]+(\/[^?#]*)/)))for(n=(n+a[1]).replace(/\/[^\/]+$/,"/");"../"===t.substring(0,3);)n=n.replace(/\/[^\/]*\/$/,"/"),t=t.substring(3);return n+t}function O(t,e){return"string"==typeof e&&(e=""===e?[]:[e]),0===e.length?"":(e=1===e.length?e[0]:"<p>"+e.join("</p><p>")+"</p>",0!==t&&1!==t&&2!==t||(t=["info","warning","error"][t]),'<div class="msg msg-'+t+'">'+e+"</div>")}S.json=function(t,e){var a=S(t,e);return!!a&&JSON.parse(a)},S.site=function(t,e,a){return"/"!==siteinfo.base&&(e=siteinfo.base+e),S(t,e,a)},S.site_json=function(t,e){return"/"!==siteinfo.base&&(e=siteinfo.base+e),S.json(t,e)};var I=function(t){var e={};function n(t){var n=t.target;(n&&(a(n,"ui")||a(n,"ui-submit"))||"A"===this.tagName&&a(this,"ui"))&&t.preventDefault();for(var i=o(this),r=0;r<i.length;++r){var s=e[i[r]];if(s)for(var l=0;l<s.length;++l)s[l].call(this,t)}}return n.on=function(t,a){e[t]=e[t]||[],e[t].push(a)},n.trigger=function(a,n){var i=e[a];if(i){"string"==typeof n&&(n=t.Event(n));for(var r=0;r<i.length;++r)n.isImmediatePropagationStopped()||i[r].call(this,n)}},n}($);function D(t){return"checkbox"===t.type||"radio"===t.type}function P(t){var e=function(t){return t.hasAttribute("data-default-value")?t.getAttribute("data-default-value"):D(t)?(t.hasAttribute("data-default-checked")?t.getAttribute("data-default-checked"):t.defaultChecked)?t.value:"":t.defaultValue}(t);return D(t)?t.checked?e!==t.value:""!==e:!x("SELECT"===t.tagName?$(t).val():t.value,e)}$(document).on("click",".ui, .uic",I),$(document).on("change",".uich",I),$(document).on("keydown",".uikd",I),$(document).on("input",".uii",I),$(document).on("unfold",".ui-unfold",I),$(document).on("mouseup mousedown",".uim",I),$((function(){$("form.need-unload-protection").each((function(){var t=this;r(t,"need-unload-protection"),$(t).on("submit",(function(){n(this,"submitting")})),$(window).on("beforeunload",(function(){if(a(t,"alert")&&!a(t,"submitting"))return"If you leave this page now, your edits may be lost."}))}))})),I.on("js-range-click",(function(t){if("change"!==t.type){var e=$(this).closest("form"),n=e[0].jsRangeClick||{},i=this.getAttribute("data-range-type")||this.name;e[0].jsRangeClick=n;var r=!1;if("keydown"!==t.type||M(t)||(r=C(t)),!(n.__clicking__||"updaterange"===t.type&&n["__update__"+i]||"keydown"===t.type&&"ArrowDown"!==r&&"ArrowUp"!==r)){var s=[],o=[];e.find("input.js-range-click").each((function(){var t=this.getAttribute("data-range-type")||this.name;i===t&&(s.push(this),a(this,"is-range-group")&&o.push(this))}));var l,u,d,h=n[i];for(d=0;d!==s.length;++d)s[d]===this&&(l=d),s[d]===h&&(u=d);if(r)return 0!==l&&"ArrowUp"===r?--l:l<s.length-1&&"ArrowDown"===r&&++l,$(s[l]).focus().scrollIntoView(),void t.preventDefault();var c,p=!1,f=!1;if("click"===t.type){for(n.__clicking__=!0,a(this,"is-range-group")?(d=0,c=s.length-1,p=this.getAttribute("data-range-group")):(n[i]=this,t.shiftKey&&h?u<=l?(d=u,c=l-1):(d=l+1,c=u):(d=1,c=0,f=this.getAttribute("data-range-group")));d<=c;)s[d].checked===this.checked||a(s[d],"is-range-group")||p&&s[d].getAttribute("data-range-group")!==p||$(s[d]).trigger("click"),++d;delete n.__clicking__}else"updaterange"===t.type&&(n["__updated__"+i]=!0);for(c=0;c!==o.length;++c)if(p=o[c].getAttribute("data-range-group"),!f||p===f){var g=null;for(d=0;d!==s.length;++d)if(s[d].getAttribute("data-range-group")===p&&!a(s[d],"is-range-group"))if(null===g)g=s[d].checked;else if(g!==s[d].checked){g=2;break}2===g?(o[c].indeterminate=!0,o[c].checked=!0):(o[c].indeterminate=!1,o[c].checked=g)}}}})),$((function(){$(".is-range-group").each((function(){I.trigger.call(this,"js-range-click","updaterange")}))}));var R,F=function(){var t=["Top","Right","Bottom","Left"],e=["top","right","bottom","left"],a=["height","width"];function n(e,a){return"border"+t[e]+a}function i(t){return n(t,"Color")}var r,s=Math.round;function o(a){var n,i,r=function(t){return $('<div class="bubble hidden'+t+'"><div class="bubtail bubtail0'+t+'"></div></div>').appendTo(document.body)}(a),s=r.children(),o=[s.width(),s.height()];for(n=0;n<4;++n)o[e[n]]=0,(i=r.css("margin"+t[n]))&&(i=parseFloat(i))&&(o[e[n]]=i);return r.remove(),o}return window.devicePixelRatio&&window.devicePixelRatio>1&&(r=window.devicePixelRatio,s=function(t){return Math.round(t*r)/r}),function(r,l){!l&&r&&"object"==typeof r?r=(l=r).content:l?"string"==typeof l&&(l={color:l}):l={};var u=null,d=l.dir,h=null,c=l.color?" "+l.color:"",p=$('<div class="bubble'+c+'" style="margin:0"><div class="bubtail bubtail0'+c+'" style="width:0;height:0"></div><div class="bubcontent"></div><div class="bubtail bubtail1'+c+'" style="width:0;height:0"></div></div>')[0];document.body.appendChild(p),l["pointer-events"]&&$(p).css({"pointer-events":l["pointer-events"]});var f=p.childNodes,g=null,m=null;function v(){var t=[0,0,0,0],a=g[1],r=g[0]/2;(m=parseFloat($(p).css(n(h,"Width"))))!=m&&(m=0),t[1^h]=t[3^h]=r+"px",t[2^h]=a+"px",f[0].style.borderWidth=t.join(" "),t[1^h]=t[3^h]=r+"px",t[2^h]=a+"px",f[2].style.borderWidth=t.join(" ");for(var s=1;s<=3;++s)f[0].style[e[h^s]]=f[2].style[e[h^s]]="";f[0].style[e[h]]=-a-m+"px";var o=m/r*Math.sqrt(a*a+r*r);for(f[2].style[e[h]]=-a-m+o+"px",s=0;s<3;s+=2)f[s].style.borderLeftColor=f[s].style.borderRightColor=f[s].style.borderTopColor=f[s].style.borderBottomColor="transparent";var l,u,d=(l=$(p).css("backgroundColor"),u=l.match(/^rgb\((.*)\)$/),u?"rgba("+u[1]+", 1)":l).replace(/([\d.]+)\)/,(function(t,e){return.75*e+.25+")"}));f[0].style[i(2^h)]=$(p).css(i(h)),f[2].style[i(2^h)]=d}function b(t,a,n,i){var r=t[e[n]],s=t[e[2^n]],o=(1-i)*r+i*s;return o=Math.max(o,Math.min(s,a[e[n]]+8)),Math.min(o,Math.max(r,a[e[2^n]]-8))}function x(t,n,i,r,s,o){var l=n[e[r]],u=n[e[2^r]],d=i[a[1&r]],h=t-s*d;return!o&&h<l+8?h=Math.min(t-g[0],l+8):!o&&h+d>u-8&&(h=Math.max(t+g[0]-d,u-8-d)),h}function y(t,e){var a=Math.max(3===e?0:u.left-t.left,1===e?0:t.right-u.right);return("h"===e||1===e||3===e)&&a>100?Math.min(t.width,a)-24:t.width-24}function w(t,e){var a=$(p);a.css("maxWidth","");var n=a.geometry(!0),i=y(t,e);i<n.width&&(a.css("maxWidth",i),n=a.geometry(!0));var r=[u.top-g.bottom-n.height-g[0],u.right+g.left+n.width+g[0],u.bottom+g.top+n.height+g[0],u.left-g.right-n.width-g[0]];return r.width=n.width,r.height=n.height,r.wconstraint=i,r}function A(t,e,a){var n=y(e,a);return(n<t.wconstraint&&n<t.width||n>t.wconstraint&&t.width>=t.wconstraint)&&(t=w(e,a)),t}function _(t,e){var a;return t.length>e&&(a="0123trblnesw".indexOf(t.charAt(e)))>=0?a%4:-1}function k(t,e){var a,n=$(p).css("border"+t+"Radius");return n?((a=n.indexOf(" "))>-1&&(n=e?n.substring(a+1):n.substring(0,a)),parseFloat(n)):0}function C(e,n,i){var r,s;return 1&i?(r=k(t[0]+t[i],1),s=k(t[2]+t[i],1)):(r=k(t[i]+t[3],1),s=k(t[i]+t[1],1)),Math.min(Math.max(e,r),n[a[1&i^1]]-s-g[0])}function M(){g||(g=o(c)),null==d&&(d="r");var t=/!/.test(d),e=/\*/.test(d),a=d.replace(/[^a0-3neswtrblhv]/,""),i=_(a,0),r=_(a,1);r=i>=0&&r>=0&&(1&r)!=(1&i)?1===r||2===r?1:0:.5,i<0&&(i=/^[ahv]$/.test(a)?a:"a");var l=$(window).geometry(),m=w(l,a);"a"===i&&(m.height+g[0]>Math.max(u.top-l.top,l.bottom-u.bottom)?m=A(m,l,i="h"):i="v");var y,k,M,S,T,N=[l.top+24,l.right-24,l.bottom-24,l.left+24];("v"===i||0===i||2===i)&&!t&&r<0&&m[2]>N[2]&&m[0]<N[0]&&(m[3]>=N[3]||m[1]<=N[1])&&(m=A(m,l,i="h")),m=A(m,l,i="v"===i&&m[2]>N[2]&&m[0]>N[0]||0===i&&!t&&m[2]>l.bottom&&l.top-m[0]<m[2]-l.bottom||2===i&&(t||m[0]>=l.top+8)?2:"v"===i||0===i||2===i?0:"h"===i&&m[3]-l.left<l.right-m[1]||1===i&&!t&&m[3]<l.left||3===i&&(t||m[1]<=l.right-8)?3:1),i!==h&&(h=i,v());var j=parseFloat($(p).css(n(1&i?0:3,"Width")));1&i?(k=x(S=b(u,l,0,r),l,m,0,r,e),T=C(s(S-k-g[0]/2-j),m,i),f[0].style.top=f[2].style.top=T+"px",y=1==i?u.left-g.right-m.width-g[1]-1:u.right+g.left+g[1]):(y=x(M=b(u,l,3,r),l,m,3,r,e),T=C(s(M-y-g[0]/2-j),m,i),f[0].style.left=f[2].style.left=T+"px",k=0==i?u.bottom+g.top+g[1]:u.top-g.bottom-m.height-g[1]-1),p.style.left=s(y)+"px",p.style.top=s(k)+"px",p.style.visibility="visible"}function S(){p&&p.parentElement.removeChild(p),p=null}var T={near:function(t,a){var n,i,r,s;for(("string"==typeof t||t.tagName||t.jquery)&&(t=$(t),null==d&&t[0]&&(d=t[0].getAttribute("data-tooltip-dir")),t=t.geometry(!0)),n=0;n<4;++n)!(e[n]in t)&&e[2^n]in t&&(t[e[n]]=t[e[2^n]]);return a&&(a=$(a))&&a.length&&a[0]!=window&&(i=t,"object"==typeof(r=a.geometry())&&(s=r.top,r=r.left),(i=jQuery.extend({},i)).top+=s,i.right+=r,i.bottom+=s,i.left+=r,t=i),u=t,M(),T},at:function(t,e,a){return T.near({top:e,left:t},a)},dir:function(t){return d=t,T},remove:S,color:function(t){return c!==(t=t?" "+t:"")&&(c=t,p.className="bubble"+c,f[0].className="bubtail bubtail0"+c,f[2].className="bubtail bubtail1"+c,h=g=null,u&&M()),T},html:function(t){var e=f[1];if(void 0===t)return e.innerHTML;if("string"==typeof t&&t===e.innerHTML&&"visible"===p.style.visibility)return T;if(u&&$(p).css({maxWidth:"",left:"",top:""}),"string"==typeof t)e.innerHTML=t;else{for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);t&&t.jquery?t.appendTo(e):e.appendChild(t)}return u&&M(),T},text:function(t){return void 0===t?$(f[1]).text():T.html(t?function(t){var e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML}(t):t)},content_node:function(){return f[1].firstChild},hover:function(t,e){return $(p).hover(t,e),T},removeOn:function(t,e){return arguments.length>1?$(t).on(e,S):p&&$(p).on(t,S),T},self:function(){return p?$(p):null},outerHTML:function(){return p?p.outerHTML:null}};return r&&T.html(r),T}}(),W=function(t){var e={};function a(a){if(window.disable_tooltip)return null;var n=t(this);(a=function(a,n){var i=a.getAttribute("data-tooltip-info");return i&&("string"==typeof i&&"{"===i.charAt(0)?i=JSON.parse(i):"string"==typeof i&&(i={builder:i}),n=t.extend(i,n)),n.builder&&e[n.builder]&&(n=e[n.builder].call(a,n)||n),(null==n.dir||a.hasAttribute("data-tooltip-dir"))&&(n.dir=a.getAttribute("data-tooltip-dir")||"v"),(null==n.type||a.hasAttribute("data-tooltip-type"))&&(n.type=a.getAttribute("data-tooltip-type")),(null==n.className||a.hasAttribute("data-tooltip-class"))&&(n.className=a.getAttribute("data-tooltip-class")||"dark"),a.hasAttribute("data-tooltip")?n.content=a.getAttribute("data-tooltip"):null==n.content&&a.hasAttribute("aria-label")?n.content=a.getAttribute("aria-label"):null==n.content&&a.hasAttribute("title")&&(n.content=a.getAttribute("title")),n}(n[0],t.extend({},a||{}))).element=this;var i,r=null,s=null,o=null,l=0,u=a.content;function h(){s=clearTimeout(s),r&&r.remove(),n.removeData("tooltipState"),window.global_tooltip===i&&(window.global_tooltip=null)}function c(){u&&!r?(r=F(u,{color:"tooltip "+a.className,dir:a.dir}),o=a.near||a.element,r.near(o).hover(i.enter,i.exit)):u?r.html(u):r&&(r&&r.remove(),r=o=null)}return i={enter:function(){return s=clearTimeout(s),++l,i},exit:function(){var t="focus"===a.type?0:200;return s=clearTimeout(s),0==--l&&"sticky"!==a.type&&(s=setTimeout(h,t)),i},erase:h,_element:n[0],html:function(t){return void 0===t?u:(u=t,c(),i)},text:function(t){return i.html(b(t))},near:function(){return o}},function t(e){if(e instanceof d)e.then(t);else{var r=window.global_tooltip;u=e,r&&r._element===a.element&&r.html()===u&&!a.done?i=r:(r&&r.erase(),n.data("tooltipState",i),c(),window.global_tooltip=i)}}(u),a.done=!0,i}function n(){var e=t(this).data("tooltipState")||a.call(this);e&&e.enter()}function i(){var e=t(this).data("tooltipState");e&&e.exit()}function s(){r(this,"need-tooltip"),"focus"===this.getAttribute("data-tooltip-type")?t(this).on("focus",n).on("blur",i):t(this).hover(n,i)}return s.erase=function(){var e=this===s?window.global_tooltip:t(this).data("tooltipState");e&&e.erase()},s.add_builder=function(t,a){e[t]=a},t((function(){t(".need-tooltip").each(s)})),s}($);function H(){this.clear()}function B(t){var e=new H,i=null;function s(t){var e=i.find("form")[0],a=i.find(".popup-body"),n=O(2,t.error);for(var r in i.find(".msg-error").remove(),a.length?a.prepend(n):i.find("h2").after(n),t.errf||{}){var s=e[r];if(s){var o=$(s).closest(".entryi, .f-i");(o.length?o:$(s)).addClass("has-error")}}return i}function o(){W.erase(),i.find("textarea, input").unautogrow(),i.trigger("closedialog"),i.remove(),r(document.body,"modal-open")}return t=t||{},e.push('<div class="modal" role="dialog"><div class="modal-dialog'+(t.anchor&&t.anchor!==window?"":" modal-dialog-centered")+(t.style?'" style="'+b(t.style):"")+'" role="document"><div class="modal-content"><form enctype="multipart/form-data" accept-charset="UTF-8"'+(t.form_class?' class="'+t.form_class+'"':"")+">","</form></div></div></div>"),e.push_actions=function(t){return e.push('<div class="popup-actions">',"</div>"),t&&e.push(t.join("")).pop(),e},e.show=function(r){if(!i){for(var l in(i=$(e.render()).appendTo(document.body)).find(".need-tooltip").each(W),i.on("click",(function(t){t.target===i[0]&&o()})),i.find("button[name=cancel]").on("click",o),t.action&&(t.action instanceof HTMLFormElement?i.find("form").attr({action:t.action.action,method:t.action.method}):i.find("form").attr({action:t.action,method:t.method||"post"})),{minWidth:1,maxWidth:1,width:1})null!=t[l]&&i.children().css(l,t[l]);i.show_errors=s,i.close=o}return!1!==r&&(!function(t,e){W.erase(),t.jquery&&(t=t[0]);for(;!a(t,"modal-dialog");)t=t.childNodes[0];var i,r=t.parentNode;if(n(r,"show"),n(document.body,"modal-open"),!a(t,"modal-dialog-centered")){var s=$(e).geometry(),o=$(window).geometry(),l=$(r).offset(),u=(s.top+s.bottom-t.offsetHeight)/2;u=Math.max(o.top+5,Math.min(o.bottom-5-t.offsetHeight,u))-l.top,t.style.top=u+"px";var d=(s.right+s.left-t.offsetWidth)/2;d=Math.max(o.left+5,Math.min(o.right-5-t.offsetWidth,d))-l.left,t.style.left=d+"px"}$(t).find("input, button, textarea, select").filter(":visible").each((function(){if(a(this,"want-focus"))return i=this,!1;i||a(this,"dangerous")||a(this,"no-focus")||(i=this)})),i&&function(t){if(t.jquery&&(t=t[0]),t.focus(),!t.hotcrp_ever_focused){if(t.select&&a(t,"want-select"))t.select();else if(t.setSelectionRange)try{t.setSelectionRange(t.value.length,t.value.length)}catch(t){}t.hotcrp_ever_focused=!0}}(i)}(i,t.anchor||window),i.find(".need-autogrow").autogrow(),i.find(".need-tooltip").each(W)),i},e}H.prototype.push=function(t,e){return t&&e?(this.open.push(this.html+t),this.close.push(e),this.html="",this.open.length-1):(this.html+=t,this)},H.prototype.pop=function(t){var e=this.open.length;for(null==t&&(t=Math.max(0,e-1));e>t;)--e,this.html=this.open[e]+this.html+this.close[e],this.open.pop(),this.close.pop();return this},H.prototype.pop_n=function(t){return this.pop(Math.max(0,this.open.length-t)),this},H.prototype.push_pop=function(t){return this.html+=t,this.pop()},H.prototype.pop_push=function(t,e){return this.pop(),this.push(t,e)},H.prototype.pop_collapse=function(t){for(null==t&&(t=this.open.length?this.open.length-1:0);this.open.length>t;)""!==this.html&&(this.html=this.open[this.open.length-1]+this.html+this.close[this.open.length-1]),this.open.pop(),this.close.pop();return this},H.prototype.render=function(){return this.pop(0),this.html},H.prototype.clear=function(){return this.open=[],this.close=[],this.html="",this},H.prototype.next_htctl_id=(R=1,function(){for(;document.getElementById("htctl"+R);)++R;return"htctl"+(++R-1)});var U=function(){var e,a=!1;function n(n,i){var r,s;n&&"string"==typeof n&&(n=t(n)),n&&a&&(r=new Date(1e3*i),s=k(e?"%A %#e %b %Y %#R your time":"%A %#e %b %Y %#r your time",r),"SPAN"==n.tagName?(n.innerHTML=" ("+s+")",n.style.display="inline"):(n.innerHTML=s,n.style.display="block"))}return n.initialize=function(t,n){e=n,a=Math.abs((new Date).getTimezoneOffset()-t)>=60},n}(),Q=[];function z(t){if(t)"string"==typeof t?Q.push(z[t]):Q.push(t);else for(var e=0;e<Q.length;++e)Q[e]()}z.time=function(t,e){U.initialize(t,e)},z.opencomment=function(){location.hash.match(/^\#?commentnew$/)&&open_new_comment()};var q={},J=1;function V(e,a,n){var i,r,s,o,l,u;if(e instanceof Array)for(i=0;i<e.length;i++)V(e[i],a,n);else if("string"==typeof e)l=n,null!=q[e]&&null!=q[e][n]&&(l=q[e][n]),u=l||"",V(t("fold"+e)||t(e),a,l),(r=t("foldsession."+e+u))?r.src=r.src.replace(/val=.*/,"val="+(a?1:0)+"&u="+J++):(r=t("foldsession."+e))&&(r.src=r.src.replace(/val=.*/,"val="+(a?1:0)+"&sub="+(n||u)+"&u="+J++)),!a&&(r=t("fold"+e+u+"_d"))&&(r.setSelectionRange&&null==r.hotcrp_ever_focused&&(r.setSelectionRange(r.value.length,r.value.length),r.hotcrp_ever_focused=!0),r.focus());else if(e&&(s="fold"+(u=n||"")+"o",o="fold"+u+"c",null==a&&e.className.indexOf(s)>=0&&(a=!0),e.className=a?e.className.replace(s,o):e.className.replace(o,s),document.recalc))try{e.innerHTML=e.innerHTML+""}catch(t){}return!1}I.on("js-foldup",(function(t,e){var n,i,r,s=this;if("number"==typeof e?e={n:e}:e||(e={}),"DIV"!==this.tagName||!t||!t.target.closest("a")||e.required){!("n"in e)&&s.hasAttribute("data-fold-target")&&(i=s.getAttribute("data-fold-target").match(/^(\D[^#]*$|.*(?=#)|)#?(\d*)([cou]?)$/))&&(""!==i[1]&&(s=document.getElementById(i[1])),e.n=parseInt(i[2])||0,"f"in e||""===i[3]||("u"===i[3]&&"INPUT"===this.tagName&&"checkbox"===this.type?e.f=this.checked:e.f="c"===i[3]));for(var l="fold"+(e.n||"");s&&(!s.id||"fold"!=s.id.substr(0,4))&&!a(s,"has-fold")&&(null==e.n||!a(s,l+"c")&&!a(s,l+"o"));)s=s.parentNode;if(!s)return!0;if(null==e.n){r=o(s);for(var u=0;u!==r.length;++u)"fold"===r[u].substring(0,4)&&(i=r[u].match(/^fold(\d*)[oc]$/))&&(null==e.n||+i[1]<e.n)&&(e.n=+i[1],l="fold"+(e.n||""))}if(!("f"in e)&&("INPUT"===this.tagName||"SELECT"===this.tagName)){var d=null;if("checkbox"===this.type)e.f=!this.checked;else if("radio"===this.type){if(!this.checked)return!0;d=this.value}else"select-one"===this.type&&(d=this.selectedIndex<0?"":this.options[this.selectedIndex].value);if(null!==d){var h=(s.getAttribute("data-"+l+"-values")||"").split(/\s+/);e.f=h.indexOf(d)<0}}n=!a(s,l+"c"),"f"in e&&!e.f===n||(e.f=n,V(s,n,e.n||0),$(s).trigger(e.f?"fold":"unfold",e)),this.hasAttribute("aria-expanded")&&this.setAttribute("aria-expanded",n?"false":"true"),t&&"object"==typeof t&&"click"===t.type&&!a(t.target,"uic")&&(t.stopPropagation(),t.preventDefault())}}));var K,X=function(){function t(t){return b(t).replace(/((?:https?|ftp):\/\/(?:[^\s<>\"&]|&amp;)*[^\s<>\"().,:;&])([\"().,:;]*)(?=[\s<>&]|$)/g,(function(t,e,a){return'<a href="'+e+'" rel="noreferrer">'+e+"</a>"+a}))}var e=0,a={0:{format:0,render:t}};function n(t){var n,i;return t&&(n=a[t])||t&&"string"==typeof t&&(i=t.indexOf("."))>0&&(n=a[t.substring(0,i)])?n:(null==t&&(t=e),a[t]||a[0])}function i(e,a,i){var r=n(e);if(r.format)try{var s=a&&r.render_inline||r.render;return{format:r.formatClass||r.format,content:s.apply(this,i)}}catch(t){h("do_render format "+r.format+": "+t.toString(),t)}return{format:0,content:t(i[0])}}function r(t,e){var a,n=[e];for(a=2;a<arguments.length;++a)n.push(arguments[a]);return i.call(this,t,!1,n)}function s(t,e){var a,n=[e];for(a=2;a<arguments.length;++a)n.push(arguments[a]);return i.call(this,t,!0,n)}function o(){var t,e,a=$(this),n=this.getAttribute("data-format"),i=this.getAttribute("data-content")||a.text(),o=null;if((e=n.indexOf("."))>0){var l=n.split(/\./);for(n=l[0],o={},e=1;e<l.length;++e)o[l[e]]=!0}(t="DIV"==this.tagName?r.call(this,n,i,o):s.call(this,n,i,o)).format&&a.html(t.content);var u=$.trim(this.className.replace(/(?:^| )(?:need-format|format\d+)(?= |$)/g," "));this.className=u+(u?" format":"format")+(t.format||0),t.format&&a.trigger("renderText",t)}return $.extend(r,{add_format:function(t){t.format&&(a[t.format]=t)},format:function(t){return n(t)},set_default_format:function(t){e=t},inline:s,on:o,on_page:function(){$(".need-format").each(o)}}),r}();function G(t,e,n){var i,r=(t=t.closest(".pa-dl, .pa-dg, .pa-filediff"))?t.parentElement:null;for(null==e?(e=!1,i="previousSibling"):(i=e?"nextSibling":"previousSibling",a(t,"pa-dl")&&(t=t[i]));;){for(;!t&&r;){if(1&n&&a(r,"pa-filediff"))return null;t=r[i],r=r.parentElement}if(!t)return null;if(t.nodeType!==Node.ELEMENT_NODE)t=t[i];else{if(a(t,"pa-dl")&&(2&n||/ pa-g[idc]/.test(t.className))&&t.offsetParent)return t;t=a(t,"pa-dg")||a(t,"pa-filediff")?(r=t)[e?"firstChild":"lastChild"]:t[i]}}}function Y(t,e){if(!t||"TEXTAREA"===t.tagName||"A"===t.tagName)return null;var n,i=t.closest(".pa-dl"),r=G(t,e,1);if(!r||!(n=r.closest(".pa-filediff")))return null;var s,o=n.getAttribute("data-pa-file"),l={ufile:o,file:o,tr:r},u=n.getAttribute("data-pa-file-user");if(u&&(l.ufile=u+"-"+o),i&&(s=i.getAttribute("data-landmark"))&&/^[ab]\d+$/.test(s)?(l[s.charAt(0)+"line"]=+s.substring(1),l.lineid=s):(l.aline=+r.firstChild.getAttribute("data-landmark"),l.bline=+r.firstChild.nextSibling.getAttribute("data-landmark"),l.lineid=l.bline?"b"+l.bline:"a"+l.aline),i&&a(i,"pa-gw"))l.notetr=i;else{do{r=r.nextSibling}while(r&&(r.nodeType!==Node.ELEMENT_NODE||a(r,"pa-gn")||!r.offsetParent));r&&a(r,"pa-gw")&&(l.notetr=r)}return l}function Z(t){var e=t.getAttribute("data-pa-note");return"string"==typeof e&&""!==e&&(e=JSON.parse(e)),"number"==typeof e&&(e=[!1,"",0,e]),e||[!1,""]}function tt(t,e){!1===e||null===e?t.removeAttribute("data-pa-note"):void 0!==e&&t.setAttribute("data-pa-note",JSON.stringify(e))}function et(){function t(t){return""===Z(t)[1]}function e(t,e){var a=$(t).find(".pa-note-links a");a.length||(a=$('<a class="ui pa-goto"></a>'),$('<div class="pa-note-links"></div>').append(a).prependTo($(t).find(".pa-notecontent"))),a.attr("href",function(t){var e,a=Y(t);return a&&(e=Nt(a.ufile,a.lineid))?"#"+e.id:""}(e));var n=e?"NEXT >":"TOP";a.text()!==n&&a.text(n)}for(var a=$(".pa-gw"),n=0;n<a.length&&a[n]!==this;)++n;if(n<a.length){for(var i=n-1;i>=0&&t(a[i]);)--i;for(var r=n+1;r<a.length&&t(a[r]);)++r;i>=0&&e(a[i],t(this)?a[r]:this),e(this,a[r])}}function at(t,e){var i=this,s=$(this);if(!a(i,"pa-gw")){for(;!a(i,"pa-dl");)i=i.parentElement;for(var o=i.nextSibling;o&&(o.nodeType!==Node.ELEMENT_NODE||a(o,"pa-gn"));)i=o,o=o.nextSibling;var l,u,d,h,c=G(i=(s=$('<div class="pa-dl pa-gw"><div class="pa-notebox"></div></div>').insertAfter(i))[0],!1,1);c&&(l=a(c,"pa-gd")?"a"+c.firstChild.getAttribute("data-landmark"):a(c,"pa-gr")&&(u=c.lastChild.firstChild)&&(d=u.getAttribute("data-landmark"))&&(h=d.indexOf("-"))>=0?"b"+d.substring(h+1):"b"+c.firstChild.nextSibling.getAttribute("data-landmark"),i.setAttribute("data-landmark",l))}if(0==arguments.length)return i;tt(i,t);var p=s.find(".pa-notebox"),f=p.children();if(e?f.slideUp(80).queue((function(){f.remove()})):f.remove(),""===t[1])return et.call(i),e?s.children().slideUp(80):n(i,"hidden"),i;var g='<div class="pa-notecontent clearfix">';if(t[2]){var m=$.isArray(t[2])?t[2]:[t[2]],v=[];for(var b in m){var x=siteinfo.pc[m[b]];x&&(x.nick?v.push(x.nick):x.nicklen||x.lastpos?v.push(x.name.substr(0,x.nicklen||x.lastpos-1)):v.push(x.name))}v.length&&(g+='<div class="pa-note-author">['+v.join(", ")+"]</div>")}if(g+='<div class="pa-note pa-'+(t[0]?"comment":"grade")+"note",t[4]&&"number"==typeof t[4]&&(g+='" data-format="'+t[4]),g+='"></div></div>',p.append(g),t[4]){var y=X(t[4],t[1]);p.find(".pa-note").addClass("format"+(y.format||0)).html(y.content)}else p.find(".pa-note").addClass("format0").text(t[1]);return et.call(i),e?p.find(".pa-notecontent").hide().slideDown(80):r(i,"hidden"),i}K=window.markdownit({highlight:function(t,e){if(e&&hljs.getLanguage(e))try{return hljs.highlight(e,t,!0).value}catch(t){}return""}}).use(markdownit_katex),X.add_format({format:1,render:function(t){return K.render(t)}}),X.add_format({format:2,render:function(t){return Et(t)}}),$(X.on_page),function(t){var e;function n(t){for(var e="string"==typeof t?1:0,a=S.site_json(!1,"list_digests")||[],n=-1,i=A(),r=0;r<a.length;++r){var s=a[r];s[e]===t?n=r:s[2]<i-3e4?(a.splice(r,1),--r):i<=s[0]&&(i=s[0]+1)}return n>=0?a[n][2]=i:e&&(a.push([i,t,i]),n=a.length-1),S.site(!1,"list_digests",a),n>=0&&a[n][1-e]}function i(t){var e,a;return(a=/^list(\d+)(?=\s|$)/.exec(t))&&(e=n(+a[1]))?e:t}function r(t,a){var r=function(t){var e=n(t);return e?"list"+e:t}(t=i(t));a&&/(?:^|\/)pset(?:|\.php)\//.test(a)&&(r+=function(t,e){var a,n,i=/(?:^|\/)(~[^\/]+)\/pset(?:|\.php)\/([^\/]+)((?:\/[0-9a-f]+)?)(?=[\/?#]|$)/.exec(e);if(i){if((t=JSON.parse(t)).pset){if(t.pset!==i[2])return"";a=n=i[1]}else a=(n=i[1]+"/pset/"+i[2])+i[3];var r=t.items.indexOf(a);if(r<0&&n!==a&&(r=t.items.indexOf(n)),r>=0)return" "+JSON.stringify({cur:i[1]+"/pset/"+i[2],prev:0===r?null:t.items[r-1],next:r===t.items.length-1?null:t.items[r+1]})}return""}(t,a)),e=A();var s,o="; Max-Age=20";siteinfo.site_relative&&(s=/^[a-z]+:\/\/[^\/]*(\/.*)/.exec((siteinfo.absolute_base||(siteinfo.absolute_base=L(siteinfo.base)),siteinfo.absolute_base)))&&(o+="; Path="+s[1]),document.cookie="hotlist-info-"+e+"="+encodeURIComponent(r)+siteinfo.cookie_params+o}function s(e,a){var n,i;if(a&&a.startsWith(siteinfo.site_relative)&&function(t){return/(?:^|\/)pset(?:|\.php)(?:$|\/)/.test(t)}(i=a.substring(siteinfo.site_relative.length))&&(n=e.closest(".has-hotlist"))){var s=n.getAttribute("data-hotlist");if(!s){var o=jQuery.Event("pa-hotlist");t(n).trigger(o),(s=o.hotlist)&&"string"!=typeof s&&(s=JSON.stringify(s))}s&&r(s,i)}}function o(t){var e,a=location.href;return location.hash&&(a=a.substring(0,a.length-location.hash.length)),this.href.substring(0,a.length+1)===a+"#"||!!g()&&(g((e=this,function(){window.location=e.href})),!0)}t(document).on("click","a",(function(t){a(this,"ui")||C.is_default_a(t)&&!this.target&&o.call(this,t)||s(this,this.getAttribute("href"))})),t(document).on("submit","form",(function(t){a(this,"ui-submit")?I.call(this,t):s(this,this.getAttribute("action"))})),t(window).on("beforeunload",(function(){var t=document.body.getAttribute("data-hotlist");t&&(!e||e+3<A())&&r(t,location.href)})),t((function(){t(".has-hotlist").each((function(){var t=this.getAttribute("data-hotlist");t&&t.startsWith("list")&&(t=i(t))&&this.setAttribute("data-hotlist",t)}))}))}(jQuery),I.on("pa-show-viewoptions",(function(){$t(this.nextSibling,this.parentNode)})),I.on("pa-pset-upload-grades",(function(){$("#upload").show()})),I.on("pa-pset-setcommit",(function(){this.closest("form").submit()})),I.on("pa-signin-radio",(function(e){"login"===this.value?(V("logingroup",!1),V("logingroup",!1,2),t("signin").value="Sign in"):"forgot"===this.value?(V("logingroup",!0),V("logingroup",!1,2),t("signin").value="Reset password"):"new"===this.value&&(V("logingroup",!0),V("logingroup",!0,2),t("signin").value="Create account")}));var nt=function(){var t=0,e=[];return function(a,n,i){return new Promise((function(r,s){var o=function(a,n,i,r){return function(){++t,$.ajax(a,{data:n,method:i||"POST",cache:!1,dataType:"json",success:function(a){r(a),--t,e.length&&e.shift()()}})}}(a,n,i,r);t<5?o():e.push(o)}))}}();!function(t){var e,i,s,o,l;function u(){var t;if(e&&(t=Nt(e.ufile,e.lineid))){for(t=t.closest(".pa-dl");t&&!t.offsetParent;)t=t.previousSibling;return t}return null}function d(t){t&&null!=t.pageX&&(l=t.timeStamp,s=t.screenX,o=t.screenY)}function h(a){var n,i;if(!("mousemove"===a.type&&l&&(Math.abs(a.screenX-s)<=1&&Math.abs(a.screenY-o)<=1||a.timeStamp-l<=200)||("keydown"===a.type||"keyup"===a.type)&&C.modifier(a))){if("keydown"!==a.type||"ArrowUp"!==(n=C(a))&&"ArrowDown"!==n&&"Enter"!==n||(i=M(a))&&(i!==M.META||"Enter"!==n)||!e)return p();var h=u();if(!h)return p();if("ArrowDown"!==n&&"ArrowUp"!==n||(r(h,"live"),h=G(h,"ArrowDown"===n,0))){if(e=Y(h),a.preventDefault(),d(a),"Enter"===n)w();else{var c=h.closest(".pa-with-fixed");t(h).addClass("live").scrollIntoView(c?{marginTop:c.firstChild.offsetHeight}:null)}return!0}}}function c(e,a){n(e,"live"),t(".pa-filediff").removeClass("live"),t(document).off(".pa-linenote"),t(document).on((a?"keydown.pa-linenote ":"")+"mousemove.pa-linenote mousedown.pa-linenote",h)}function p(){t(".pa-dl.live").removeClass("live"),t(".pa-filediff").addClass("live"),t(document).off(".pa-linenote")}function f(e,a){var n=Z(e=e.closest(".pa-dl")),i=e?t(e).find("textarea"):null;if(!e||!a&&i.length&&!x(n[1],i.val().replace(/\s+$/,"")))return!1;r(e,"editing"),t(e).find(":focus").blur(),at.call(e,n,!0);var s=u();return s&&c(s,!0),!0}var g=function(e){if(!a(this,"pa-gw"))throw new Error("!");if(a(this,"pa-outstanding"))return!1;n(this,"pa-outstanding");var i,s,o=this,l=Z(this),u=a(this,"editing"),d=this.closest(".pa-filediff"),h=d.closest(".pa-psetinfo"),c=this.closest(".pa-grade-range-block"),p=d.getAttribute("data-pa-file"),g=G(this,!1,1);if(s=this.hasAttribute("data-landmark")?this.getAttribute("data-landmark"):a(g,"pa-gd")?"a"+g.firstChild.getAttribute("data-landmark"):"b"+g.firstChild.nextSibling.getAttribute("data-landmark"),u){var m=t(this).find("form")[0];i={note:m.note.value},m.iscomment&&m.iscomment.checked&&(i.iscomment=1),t(m).find(".pa-save-message").remove(),t(m).find(".aab").append('<div class="aabut pa-save-message">Saving…</div>')}else"function"==typeof e&&(e=e(l?l[1]:"",l)),i={note:e};return i.format=l?l[4]:null,null==i.format&&(i.format=d.getAttribute("data-default-format")),c&&c.setAttribute("data-pa-notes-outstanding",+c.getAttribute("data-pa-notes-outstanding")+1),new Promise((function(e,a){nt(E("api/linenote",bt(h,{file:p,line:s,oldversion:l&&l[3]||0})),i).then((function(i){r(o,"pa-outstanding"),i&&i.ok?(r(o,"pa-save-failed"),l=(l=i.linenotes[p])&&l[s],tt(o,l),u?(t(o).find(".pa-save-message").html("Saved"),f(o)):at.call(o,l),e(o)):(n(o,"pa-save-failed"),u&&t(o).find(".pa-save-message").html('<strong class="err">'+b(i.error||"Failed")+"</strong>"),a(o)),c&&function(e){var a=+e.getAttribute("data-pa-notes-outstanding")-1;a?e.setAttribute("data-pa-notes-outstanding",a):(e.removeAttribute("data-pa-notes-outstanding"),t(e).find(".pa-grade").each((function(){Ct.call(this,null,!0)})))}(c)}))}))};function m(t){return f(this,!0),!0}function v(e){return!("Escape"===C(e)&&!M(e)&&f(this))&&("Enter"!==C(e)||M(e)!==M.META||(t(this).closest("form").submit(),!1))}function y(t,e){return t*t+e*e<144}function w(a){var n;if(n=e.notetr?t(e.notetr):t(at.call(e.tr)),d(a),n.hasClass("editing")){if(f(n[0]))return a&&a.stopPropagation(),!0;var i=n.find("textarea").focus();return i[0].setSelectionRange&&i[0].setSelectionRange(0,i.val().length),!1}return function(a,n,i){a.removeClass("hidden").addClass("editing"),n&&tt(a[0],n);var r=a.find(".pa-notebox");if(i){a.css("display","").children().css("display","");var s=r.children();s.slideUp(80).queue((function(){s.remove()}))}var o=t(e.tr).closest(".pa-psetinfo"),l=n?n[4]:null;null==l&&(l=a.closest(".pa-filediff").attr("data-default-format"));var u='<form method="post" action="'+b(E("api/linenote",bt(o[0],{file:e.file,line:e.lineid,oldversion:n&&n[3]||0,format:l})))+'" enctype="multipart/form-data" accept-charset="UTF-8" class="ui-submit pa-noteform"><textarea class="pa-note-entry" name="note"></textarea><div class="aab aabr pa-note-aa"><div class="aabut"><button class="btn-primary" type="submit">Save comment</button></div><div class="aabut"><button type="button" name="cancel">Cancel</button></div>';o[0].hasAttribute("data-pa-user-can-view-grades")||(u+='<div class="aabut"><label><input type="checkbox" name="iscomment" value="1">Show immediately</label></div>');var d=t(u+"</div></form>").appendTo(r),h=d.find("textarea");n&&null!==n[1]&&(h.text(n[1]),h[0].setSelectionRange&&h[0].setSelectionRange(n[1].length,n[1].length)),h.autogrow().keydown(v),d.find("input[name=iscomment]").prop("checked",!(!n||!n[0])),d.find("button[name=cancel]").click(m),d.on("submit",(function(){g.call(this.closest(".pa-dl"))})),i&&(h.focus(),d.hide().slideDown(100))}(n,Z(n[0]),!0),c(e.tr,!1),!1}I.on("pa-editablenotes",(function(t){var a=t.target.closest(".pa-dl");if(0===t.button&&a&&!a.matches(".pa-gn, .pa-gx")){var n=Y(t.target),r=A();"mousedown"===t.type&&n?e&&e.tr===n.tr&&i&&y(i[0]-t.clientX,i[1]-t.clientY)&&r-i[2]<=500||(e=n,i=[t.clientX,t.clientY,r,!1]):"mouseup"===t.type&&n?e&&e.tr===n.tr&&i&&y(i[0]-t.clientX,i[1]-t.clientY)&&!i[3]&&(e=n,i[3]=!0,w(t)):"click"===t.type&&n?(e=n,w(t)):e=i=null}}))}($),function(t){I.on("pa-gx",(function(e){for(var a=e.currentTarget,n=Y(a,!1);n&&!n.bline;)n=Y(n.tr,!1);var i=Y(a,!0);if(n||i){var r=n?n.aline+1:1,s=n?n.bline+1:1,o=i?i.bline:0;if(!(i&&i.aline<=1)){var l={file:(n||i).file,fromline:s};return o&&(l.linecount=o-s),t.ajax(j("api/blob",bt(this,l)),{success:function(e){if(e.ok&&e.data){for(var n=e.data.replace(/\n$/,"").split("\n"),i=n.length-1;i>=0;--i){t('<div class="pa-dl pa-gc"><div class="pa-da" data-landmark="'+(r+i)+'"></div><div class="pa-db" data-landmark="'+(s+i)+'"></div><div class="pa-dd"></div></div>').insertAfter(a).find(".pa-dd").text(n[i])}t(a).remove()}}}),!0}}}))}($),I.on("pa-diff-toggle-hide-left",(function(t){var e=St(this),n=a(e,"pa-hide-left");t.metaKey?$(".pa-diff-toggle-hide-left").each((function(){s(St(this),"pa-hide-left",!n),s(this,"btn-primary",n)})):(s(e,"pa-hide-left",!n),s(this,"btn-primary",n))})),jQuery.fn.extend({serializeWith:function(t){var e,a,n=this.serialize();if(null!=n&&t)for(e in a=n.length&&"&"!=n[n.length-1]?"&":"",t)null!=t[e]&&(n+=a+encodeURIComponent(e)+"="+encodeURIComponent(t[e]),a="&");return n}});var it,rt={};function st(t,e){e.type=t,e.tcell=e.tcell||e.text,rt[t]=e}function ot(t,e){var a='<div class="pa-pd"><span class="pa-gradewidth"><input type="text" class="uich pa-gradevalue pa-gradewidth" name="'.concat(this.key,'" id="',t,'"></span> <span class="pa-gradedesc">');return e.max_text?a+=e.max_text:this.max&&(a+="of "+this.max),a+"</span></div>"}function lt(t,e,a){var n,i=t.key,r=t.title?b(t.title):i,s=rt[t.type||"numeric"];if((e||t.student)&&s.entry){a=!1!==a;var o={editable:e},l="pa-ge"+ ++lt.id_counter;n=(a?'<form class="ui-submit ':'<div class="')+"pa-grade pa-p","section"===t.type&&(n+=" pa-p-section"),!1===t.visible&&(n+=" pa-p-hidden"),n=n.concat('" data-pa-grade="',i),a||(n=n.concat('" data-pa-grade-type="',s.type)),n=n.concat('"><label class="pa-pt" for="',l,'">',r,"</label>"),t.edit_description&&(n+='<div class="pa-pdesc">'+b(t.edit_description)+"</div>"),n+=s.entry.call(t,l,o)+(a?"</form>":"</div>")}else n='<div class="pa-grade pa-p',"section"===t.type&&(n+=" pa-p-section"),n+='" data-pa-grade="'+i+'"><div class="pa-pt">'+r+"</div>","text"===t.type?n+='<div class="pa-pd pa-gradevalue"></div>':(n+='<div class="pa-pd"><span class="pa-gradevalue pa-gradewidth"></span>',t.max&&"letter"!==t.type&&(n+=' <span class="pa-gradedesc">of '+t.max+"</span>"),n+="</div>"),n+="</div>";return n}function ut(){var t=pt.call(this);"checkbox"===this.type&&(this.value=this.checked?t.max:""),this.type="text",this.className=(a(this,"ui")||a(this,"uich")?"uich ":"")+"pa-gradevalue pa-gradewidth";var e=this.closest(".pa-pd");$(e).find(".pa-grade-uncheckbox").remove(),$(e).find('input[name^="'+this.name+':"]').addClass("hidden")}function dt(){var t=this.value.trim(),e=pt.call(this);this.type="checkbox",this.checked=""!==t&&"0"!==t,this.value=e.max,this.className=(a(this,"uich")?"ui ":"")+"pa-gradevalue",$(this.closest(".pa-pd")).find(".pa-gradedesc").append(' <a href="" class="x ui pa-grade-uncheckbox" tabindex="-1">#</a>')}function ht(t,e,n,i){var r,o=$(this),l=o.find(".pa-gradevalue"),u=l[0]&&"SPAN"!==l[0].tagName&&"DIV"!==l[0].tagName,d=rt[t.type||"numeric"];if(t.max&&u&&(!e||e<=t.max?o.find(".pa-gradeabovemax").remove():o.find(".pa-gradeabovemax").length||o.find(".pa-pd").after('<div class="pa-pd pa-gradeabovemax">Grade is above max</div>')),u)if(null==n||e===n)o.find(".pa-gradediffers").remove();else{var h=("late_hours"===t.key?"auto-late hours":"autograde")+" is "+d.text.call(t,n);o.find(".pa-gradediffers").length||o.find(".pa-pd").first().append('<span class="pa-gradediffers"></span>');var c=o.find(".pa-gradediffers");c.text()!==h&&c.text(h)}if(u?(r=null==e?"":d.text.call(t,e,!0),d.reflect_value?d.reflect_value.call(t,l[0],e,i||{}):l.val()!==r&&(!l.is(":focus")||i&&i.reset)&&l.val(r),l[0].hasAttribute("placeholder")&&(l[0].removeAttribute("placeholder"),"select"===d.type&&""===l[0].options[0].value&&l[0].remove(0)),"checkbox"===l[0].type?(l[0].checked=!!e,l[0].indeterminate=i&&i.mixed):l.val()!==r&&(!l.is(":focus")||i&&i.reset)&&l.val(r),i&&i.reset&&(l[0].setAttribute("data-default-value",null==e?"":d.text.call(t,e,!0)),i.mixed&&(l[0].setAttribute("placeholder","Mixed"),"select"===d.type&&(l.prepend('<option value="">Mixed</option>'),l[0].selectedIndex=0)))):(r=d.text.call(t,e,!1),l.text()!==r&&l.text(r),s(this,"hidden",""===r&&!t.max&&"section"!==t.type)),t.landmark&&this.parentElement&&a(this.parentElement,"want-pa-landmark-links")){var p=/^(.*):(\d+)$/.exec(t.landmark),f=$(Nt(p[1],"a"+p[2])),g="";if(f.length){var m=$(this).closest(".pa-psetinfo")[0].getAttribute("data-pa-directory")||"";m&&p[1].substr(0,m.length)===m&&(p[1]=p[1].substr(m.length)),g='@<a href="#'+f[0].id+'" class="ui pa-goto">'+b(p[1]+":"+p[2])+"</a>"}var v=o.find(".pa-gradeboxref");f.length?v.length&&v.html()===g||(v.remove(),o.find(".pa-pd").first().append('<span class="pa-gradeboxref">'+g+"</span>")):v.remove()}}function ct(){for(var t=this.closest(".pa-psetinfo"),e=null;t;){var a=$(t).data("pa-gradeinfo");if("string"==typeof a&&(a=JSON.parse(a),$(t).data("pa-gradeinfo",a)),(e=e?$.extend(e,a):a)&&e.entries)break;t=t.parentElement.closest(".pa-psetinfo")}return e}function pt(){var t=this.closest(".pa-grade");return ct.call(t).entries[t.getAttribute("data-pa-grade")]}function ft(t,e){var a,n=e.length?e.join("").concat(t):t,i=t.match(/<[^>]*>/g);if(i)for(a=0;a!==i.length;++a)"/"===i[a].charAt(1)?e.pop():e.push(i[a]);for(a=e.length-1;a>=0;--a){var r=e[a].indexOf(" ");n=n.concat("</",e[a].substr(1,r<0?-1:r-1),">")}return n}st("numeric",{text:function(t){return null==t?"":t+""},entry:ot}),st("formula",{text:function(t){return null==t?"":t.toFixed(1)}}),st("text",{text:function(t){return null==t?"":t},entry:function(t,e){return'<div class="pa-pd"><textarea class="uich pa-pd pa-gradevalue need-autogrow" name="'.concat(this.key,'" id="',t,'"></textarea></div>')},justify:"left",sort:"forward"}),st("select",{text:function(t){return null==t?"":t},entry:function(t,e){for(var a='<div class="pa-pd"><span class="select"><select class="uich pa-gradevalue" name="'.concat(this.key,'" id="',t,'"><option value="">None</option>'),n=0;n!==this.options.length;++n){var i=b(this.options[n]);a=a.concat('<option value="',i,'">',i,"</option>")}return a+"</select></span></div>"},justify:"left",sort:"forward"}),st("checkbox",{text:function(t,e){return e?t+"":null==t||0===t?"–":t==(this.max||1)?"✓":t+""},tcell:function(t){return null==t||0===t?"":t==(this.max||1)?"✓":t+""},entry:function(t,e){var a='<div class="pa-pd"><span class="pa-gradewidth"><input type="checkbox" class="ui pa-gradevalue ml-0" name="'.concat(this.key,'" id="',t,'" value="',this.max,'"></span>');return e.editable&&(a=a.concat(' <span class="pa-gradedesc">of ',this.max,' <a href="" class="x ui pa-grade-uncheckbox" tabindex="-1">#</a></span>')),a+"</div>"},justify:"center",reflect_value:function(t,e,a){var n=null==e||""===e||0===e||this&&e===this.max;n||"checkbox"!==t.type?n&&"checkbox"!==t.type&&a.reset&&dt.call(t):ut.call(t),"checkbox"===t.type?(t.checked=!!e,t.indeterminate=a.mixed):t.value===e||!a.reset&&$(t).is(":focus")||(t.value=e+"")}}),function(){function t(t){return{text:function(e,a){return a?e+"":null==e||0===e?"–":e>0&&Math.abs(e-Math.round(e))<.05?t.repeat(Math.round(e)):e+""},tcell:function(e){return null==e||0===e?"":e>0&&Math.abs(e-Math.round(e))<.05?t.repeat(Math.round(e)):e+""},entry:function(t,e){for(var a='<div class="pa-pd"><span class="pa-gradewidth"><input type="hidden" class="uich pa-gradevalue" name="'.concat(this.key,'">'),n=0;n<this.max;++n)a=a.concat('<input type="checkbox" class="ui js-checkboxes-grade ml-0" name="',this.key,":",n,'" value="1"'),n===this.max-1&&(a+=' id="'+t+'"'),a+=">";return a+="</span>",e.editable&&(a+=' <span class="pa-gradedesc">of '+this.max+' <a href="" class="x ui pa-grade-uncheckbox" tabindex="-1">#</a></span>'),a+"</div>"},justify:"left",reflect_value:function(t,e,a){var n=null==e||""===e||0===e||e>=0&&(!this||e<=this.max)&&Math.abs(e-Math.round(e))<.05;n||"hidden"!==t.type?n&&"hidden"!==t.type&&a.reset&&dt.call(t):ut.call(t),t.value===e||!a.reset&&$(t).is(":focus")||(t.value=e);var i=t.name+":",r=Math.round(e||0);$(t.closest(".pa-pd")).find("input[type=checkbox]").each((function(){if(this.name.startsWith(i)){var t=+this.name.substring(i.length);this.checked=t<r,this.indeterminate=a.mixed}}))}}}st("checkboxes",t("✓")),st("stars",t("⭐")),I.on("js-checkboxes-grade",(function(t){var e=this.name.indexOf(":"),a=this.name.substring(0,e),n=this.name.substring(e+1),i=this.closest("form").elements[a],r=this.checked?+n+1+"":n;i.value!==r&&(i.value=r,$(i).trigger("change"))}))}(),st("section",{text:function(){return""},entry:function(){return""}}),it={98:"A+",95:"A",92:"A-",88:"B+",85:"B",82:"B-",78:"C+",75:"C",72:"C-",68:"D+",65:"D",62:"D-",50:"F"},st("letter",{text:function(t){return null==t?"":it[t]||t+""},entry:function(t,e){return e.max_text="letter grade",ot.call(this,t,e)},justify:"left",tics:function(){var t=[];for(var e in it)1===it[e].length&&t.push({x:e,text:it[e]});for(var e in it)2===it[e].length&&t.push({x:e,text:it[e],label_space:5});for(var e in it)2===it[e].length&&t.push({x:e,text:it[e].substring(1),label_space:2,notic:!0});return t}}),lt.id_counter=0,I.on("pa-grade-uncheckbox",(function(){$(this.closest(".pa-pd")).find(".pa-gradevalue").each((function(){ut.call(this),this.focus(),this.select()}))})),I.on("pa-gradevalue",(function(t){var e,n,i=this.closest("form"),r=this;i&&a(i,"pa-grade")?$(i).submit():"hidden"===r.type&&(e=r.closest(".pa-grade").getAttribute("data-pa-grade-type"))&&(n=rt[e]).reflect_value&&setTimeout((function(){n.reflect_value.call(null,r,+r.value,{})}),0)})),I.on("pa-diff-toggle-markdown",(function(t){var e=St(this),n=!a(e,"pa-markdown");t.metaKey?$(".pa-diff-toggle-markdown").each((function(){var t=St(this),e=a(t,"pa-markdown");n&&!e?gt.call(t):!n&&e&&mt.call(t),s(this,"btn-primary",n)})):((n?gt:mt).call(e),s(this,"btn-primary",n))}));var gt=function(){var t,e;function i(t){return t[0]+1===t[1]?String(t[1]):t[0]+1+"-"+t[1]}function r(t,e,a,n,r){var s=t[e];return s.map&&0===s.level&&s.attrSet("data-landmark",i(s.map)),r.renderToken(t,e,a,n)}function s(t,e,a,n,r){var s=t[e];return s.map&&s.level<=1&&s.attrSet("data-landmark",i(s.map)),r.renderToken(t,e,a,n)}function o(t,e){if(e.map&&0===e.level){var a=' data-landmark="'+i(e.map)+'"',n=t.indexOf(" "),r=t.indexOf(">");n>0&&n<r&&(r=n),t=t.substring(0,r)+a+t.substring(r)}return t}function l(t){return t?function(e,a,n,i,r){var s=e[a];return o(t(e,a,n,i,r),s)}:r}function u(){if(!t){for(var a of(t=markdownit().use(markdownit_katex),["paragraph_open","heading_open","ordered_list_open","bullet_list_open","table_open","blockquote_open","hr"]))t.renderer.rules[a]=l(t.renderer.rules[a]);t.renderer.rules.fence=t.renderer.rules.code_block=function(t){return function(e,a,n,i,r){var s,o,l,u,d,h=e[a],c=h,p=h.info?t.utils.unescapeAll(h.info):"",f=!1;if(p&&p.indexOf(" ")>=0&&((d=p.match(/^ *([-a-z+]+) *$/))?p=d[1]:(h.content=p+"\n"+h.content,h.map&&(h.map[0]-=1),p="")),(s=p?p.trim().split(/\s+/g)[0]:"")&&hljs.getLanguage(s))try{o=hljs.highlight(s,h.content,!0).value,f=!0}catch(t){}if(f||(o=t.utils.escapeHtml(h.content)),p&&(l=h.attrIndex("class"),c={attrs:h.attrs?h.attrs.slice():[]},l<0?c.attrs.push(["class",n.langPrefix+s]):c.attrs[l][1]+=" "+n.langPrefix+s),u="><code".concat(r.renderAttrs(c),">"),h.map&&0===h.level){var g=o.split(/\n/),m=[],v=h.map[0]+2;""===g[g.length-1]&&g.pop();var b=g.length;if(f){var x=[];for(l=0;l!==b;++l)m.push('<pre data-landmark="',v+l,l+1!==b?'" class="partial"':'"',u,ft(g[l],x),"\n</code></pre>")}else for(l=0;l!==b;++l)m.push('<pre data-landmark="',v+l,l+1!==b?'" class="partial"':'"',u,g[l],"\n</code></pre>");return m.join("")}return"<pre".concat(u,o,"</code></pre>")}}(t),t.renderer.rules.image=function(t){function a(t,e){return siteinfo.site_relative+"~"+encodeURIComponent(peteramati_uservalue)+"/raw/"+t.getAttribute("data-pa-pset")+"/"+t.getAttribute("data-pa-hash")+"/"+e}return function(n,i,r,s,l){var u,d,h,c=n[i],p=c.attrIndex("src"),f=c.attrs[p][1];if(peteramati_uservalue&&e&&(u=e.closest(".pa-psetinfo"))){if(!/\/\//.test(f)){for(var g=e.closest(".pa-filediff"),m=g&&g.hasAttribute("data-pa-file")?g.getAttribute("data-pa-file").replace(/^(.*)\/[^\/]*$/,"$1"):"";;)if(f.startsWith("./"))f=f.substring(2).replace(/^\/+/,"");else if(f.startsWith("../")&&""!==m)f=f.substring(3).replace(/^\/+/,""),m=m.replace(/(?:^|\/)[^\/]+\/*$/,"");else{if(f.startsWith("../")||f.startsWith("/")){f=null;break}if(!(d=f.match(/(^|\/+)[^\/]+\/\.\.(?:\/+|$)(.*)$/)))break;f=d[1]+d[2]}c.attrs[p][1]=f?a(u,m?m+"/"+f:f):"data:image/jpg,"}(d=f.match(/^https:\/\/github\.com\/([^\/]+\/[^\/]+)\/(?:blob|raw)\/([^\/]+)\/(.*)$/))&&(h=(u.getAttribute("data-pa-repourl")||"").match(/^(?:https:\/\/github\.com\/|git@github\.com:)(.*?)\/?$/))&&h[1]==d[1]&&u.getAttribute("data-pa-branch")==d[2]&&(c.attrs[p][1]=a(u,d[3]))}return o(t(n,i,r,s,l),c)}}(t.renderer.rules.image),t.renderer.rules.list_item_open=s}return t}function d(t){for(var e;(e=t.firstChild)&&1!==e.nodeType;)t.removeChild(e);if(e&&e.hasAttribute("data-landmark")){for(;e.nextSibling&&1!==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);if(e.nextSibling){"OL"===t.tagName&&(e.hasAttribute("value")||(e.value=t.start),t.start=e.value+1);var a=document.createElement(t.tagName);a.appendChild(t.removeChild(e)),t=a}t.setAttribute("data-landmark",e.getAttribute("data-landmark"))}return t}return function(){if(!a(this,"pa-markdown")&&!a(this,"pa-highlight")){for(var t,i=this.firstChild,r=[],s=1;i;){var o=i.nextSibling;if(a(i,"pa-gr"))this.removeChild(i);else if(a(i,"pa-gi")||a(i,"pa-gc")){for(t=+i.firstChild.nextSibling.getAttribute("data-landmark");s<t;)r.push("\n"),++s;r.push(i.lastChild.textContent),a(i.lastChild,"pa-dnonl")||r.push("\n"),++s,n(i,"hidden")}i=o}var l,h=document.createElement("div");for(e=this,h.innerHTML=u().render(r.join("")),e=null,i=this.firstChild;l=h.firstChild;)if(1===l.nodeType){"OL"===l.tagName||"UL"===l.tagName?l=d(l):"P"===l.tagName&&1===l.firstChild.nodeType&&"IMG"===l.firstChild.tagName&&l.firstChild===l.lastChild&&n(l,"image-container");var c=document.createElement("div");c.className="pa-dl pa-gr";var p=document.createElement("div");p.className="pa-da";var f=document.createElement("div");f.className="pa-db";var g=l.getAttribute("data-landmark");if(g){for(var m=parseInt(g),v=g.indexOf("-"),b=v>=0?parseInt(g.substring(v+1)):m;i&&!((a(i,"pa-gi")||a(i,"pa-gc"))&&+i.firstChild.nextSibling.getAttribute("data-landmark")>=m);)i=i.nextSibling;f.setAttribute("data-landmark",m);for(var x=0,y=i;y;){if(a(y,"pa-gi")||a(y,"pa-gc")){if(+y.firstChild.nextSibling.getAttribute("data-landmark")>=b)break;x|=a(y,"pa-gi")?1:2}y=y.nextSibling}c.className+=2===x?" pa-gc":" pa-gi"}var w=document.createElement("div");for(w.className="pa-dr",l===h.firstChild&&h.removeChild(l),w.appendChild(l);h.firstChild&&1!==h.firstChild.nodeType;)w.appendChild(h.removeChild(h.firstChild));c.appendChild(p),c.appendChild(f),c.appendChild(w),this.insertBefore(c,i)}else h.removeChild(l);n(this,"pa-markdown")}}}();function mt(){for(var t=this.firstChild;t;){var e=t.nextSibling;a(t,"pa-gr")?this.removeChild(t):(a(t,"pa-gi")||a(t,"pa-gc"))&&r(t,"hidden"),t=e}r(this,"pa-markdown")}function vt(){var t,e=this.getAttribute("data-pa-file");if((t=this.getAttribute("data-language"))||(/\.(?:cc|cpp|hh|hpp|c\+\+|h\+\+|C|H)$/.test(e)?t="c++":/\.(?:c|h)$/.test(e)&&(t="c"),t&&this.setAttribute("data-language",t)),t&&hljs.getLanguage(t)&&!a(this,"pa-highlight")&&!a(this,"pa-markdown")){for(var i,r,s=this.firstChild,o=[],l=1;s;){if(a(s,"pa-gi")||a(s,"pa-gc")){for(i=+s.firstChild.nextSibling.getAttribute("data-landmark");l<i;)o.push("\n"),++l;o.push(s.lastChild.textContent),a(s.lastChild,"pa-dnonl")||o.push("\n"),++l}s=s.nextSibling}try{r=hljs.highlight(t,o.join(""),!0).value.split("\n")}catch(t){return}s=this.firstChild;for(var u=[],d="language-"+t;s;){if(a(s,"pa-gi")||a(s,"pa-gc")){i=+s.firstChild.nextSibling.getAttribute("data-landmark");var h=s.lastChild;h.setAttribute("data-pa-text",h.textContent),h.innerHTML=ft(r[i-1],u),n(h,d)}s=s.nextSibling}n(this,"pa-highlight")}}function bt(t,e){var a,n=t.closest(".pa-psetinfo");return e=e||{},a=n.getAttribute("data-pa-user"),e.u=a||peteramati_uservalue,(a=n.getAttribute("data-pa-pset"))&&(e.pset=a),(a=n.getAttribute("data-pa-hash"))&&(e.commit=a),e}function yt(t){t=t||ct.call(this);var e=this.getAttribute("data-pa-grade"),a=t.entries[e];"late_hours"===e?ht.call(this,{key:"late_hours"},t.late_hours,t.auto_late_hours):a&&ht.call(this,a,t.grades?t.grades[a.pos]:null,t.autogrades?t.autogrades[a.pos]:null)}function wt(){r(this,"need-pa-grade");var t,e=this.getAttribute("data-pa-grade"),a=ct.call(this);if(a&&e&&(t=a.entries[e])&&($(this).html(lt(t,a.editable)),$(this).find(".need-autogrow").autogrow(),yt.call($(this).find(".pa-grade")[0],a),t.landmark_range&&this.closest(".pa-gradebox")&&Ct.call(this.firstChild,t),this.hasAttribute("data-pa-landmark-buttons")))for(var n=JSON.parse(this.getAttribute("data-pa-landmark-buttons")),i=0;i<n.length;++i)"string"==typeof n[i]?$(this).find(".pa-pd").first().append(n[i]):n[i].className&&$(this).find(".pa-pd").first().append('<button type="button" class="btn uic uikd pa-grade-button" data-pa-grade-button="'+n[i].className+'">'+n[i].title+"</button>")}function At(){r(this,"need-pa-gradelist"),n(this,"pa-gradelist");var t=this.closest(".pa-psetinfo"),e=ct.call(t);if(e){for(var i=this.firstChild;i&&!a(i,"pa-grade");)i=i.nextSibling;for(var s=0;s!==e.order.length;++s){var o=e.order[s];if(o)if(i&&i.getAttribute("data-pa-grade")===o)i=i.nextSibling;else{var l=$(lt(e.entries[o],e.editable))[0];this.insertBefore(l,i),yt.call(l,e)}}for(;i;){l=i;i=i.nextSibling,this.removeChild(l)}$(this).find(".need-autogrow").autogrow()}}function _t(){if(!a(this,"pa-psetinfo"))throw new Error("bad pa_loadgrades");var t=ct.call(this);if(t&&t.order){$(this).find(".need-pa-grade").each((function(){wt.call(this,!0)})),$(this).find(".pa-gradelist").each((function(){At.call(this,!0)})),$(this).find(".pa-grade").each((function(){var e=this.getAttribute("data-pa-grade"),a=t.entries[e];"late_hours"===e?ht.call(this,{key:"late_hours"},t.late_hours,t.auto_late_hours):a&&ht.call(this,a,t.grades?t.grades[a.pos]:null,t.autogrades?t.autogrades[a.pos]:null)}));var e=It(t),n=""+e[0],i=!1;e[0]&&$(this).find(".pa-gradelist:not(.pa-gradebox)").each((function(){$(this).find(".pa-total").length||$(this).prepend(function(t,e){var a='<div class="pa-total pa-p',n=0;for(var i in t.entries)"text"!==t.entries[i].type&&"select"!==t.entries[i].type&&"section"!==t.entries[i].type&&++n;return n<=1&&(a+=" hidden"),a+'"><div class="pa-pt">total</div><div class="pa-pd"><span class="pa-gradevalue pa-gradewidth"></span> <span class="pa-gradedesc">of '+e[1]+"</span></div></div>"}(t,e))})),$(this).find(".pa-total").each((function(){var t=$(this).find(".pa-gradevalue");t.text()!==n&&(t.text(n),i=!0)})),i&&Qt($(this).find(".pa-grgraph"))}}function kt(t,e,a,n){var i=-1,r=-1,s=this;if("function"==typeof t){a=t,n=e;var o=pt.call(this),l=o&&o.landmark_range?/:(\d+):(\d+)$/.exec(o.landmark_range):null;if(!l||!(s=s.closest(".pa-filediff")))return null;t=+l[1],e=+l[2]}for(;s=G(s,!0,3);){var u=s.firstChild;u.hasAttribute("data-landmark")&&(i=+u.getAttribute("data-landmark")),(u=u.nextSibling)&&u.hasAttribute("data-landmark")&&(r=+u.getAttribute("data-landmark")),i>=t&&i<=e&&(!n||s.matches(n))&&a.call(this,s,i,r)}}function Ct(t,e){var n=this.closest(".pa-grade"),i=$(n).find(".pa-pt").html(),r=null;t||(t=pt.call(n)),kt.call(this,(function(t,e,a){var n,s,o=Z(t);o[1]&&((n=/^[\s❮→]*(\+)(\d+(?:\.\d+)?|\.\d+)((?![.,]\w|[\w%$*])\S*?)[.,;:❯]?(?:\s|$)/.exec(o[1]))||(n=/^[\s❮→]*()(\d+(?:\.\d+)?|\.\d+)(\/[\d.]+(?![.,]\w|[\w%$*\/])\S*?)[.,;:❯]?(?:\s|$)/.exec(o[1])))&&(null===r&&(r=0),r+=parseFloat(n[2]),s=i+": "+b(n[1])+"<b>"+b(n[2])+"</b>"+b(n[3]));var l=$(t).find(".pa-note-gradecontrib");!l.length&&s&&(l=$('<div class="pa-note-gradecontrib"></div>').insertBefore($(t).find(".pa-note"))),s?l.html(s):l.remove()}),".pa-gw"),t.round&&null!=r&&(r="up"===t.round?Math.ceil(r):"down"===t.round?Math.floor(r):Math.round(r));var s=$(this).find(".pa-notes-grade");if(null===r)s.remove();else{if(!s.length){s=$('<a class="uic uikd pa-notes-grade" href=""></a>');for(var o=this.lastChild.firstChild;o&&(1!==o.nodeType||a(o,"pa-gradewidth")||a(o,"pa-gradedesc"));)o=o.nextSibling;this.firstChild.nextSibling.insertBefore(s[0],o)}s.text("Notes grade "+r)}var l=$(this).find(".pa-gradevalue")[0];if(l){var u,d=null===r?"":""+r;e&&(u=$(l).val())==l.getAttribute("data-pa-notes-grade")&&d!=u&&$(l).val(d).change(),l.setAttribute("data-pa-notes-grade",d)}return r}function $t(t,e,a){var n=$(t);return null!=a&&(a=!a),n.toggleClass("hidden",a),e&&$(e).find("span.foldarrow").html(n.hasClass("hidden")?"&#x25B6;":"&#x25BC;"),!1}function Mt(t,e){if(a(t,"need-load")){var n=t.closest(".pa-psetinfo");$.ajax(j("api/filediff",bt(t)),{type:"GET",cache:!1,dataType:"json",data:{file:(i=t.id.substr(8),decodeURIComponent(i.replace(/_/g,"%"))),base_hash:n.getAttribute("data-pa-base-hash"),hash:n.getAttribute("data-pa-hash")},success:function(a){if(a.ok&&a.content_html){var n=$(a.content_html);$(t).html(n.html())}r(t,"need-load"),e()}})}else e();var i}function St(t){return t.closest(".pa-filediff")||document.getElementById(t.closest(".pa-fileref").getAttribute("data-pa-fileid"))}function Tt(t,e,a){if(null==e){t instanceof Node&&(t=t.hash);var n=t.match(/^#?L([ab]\d+)_(.*)$/);if(!n)return $(null);t=n[2],e=n[1]}else{if(t instanceof Node){for(var i=t;i&&!i.hasAttribute("data-pa-file");)i=i.parentElement;if(!i)return $(null);t=i.getAttribute("data-pa-file"),i.hasAttribute("data-pa-file-user")&&(t=i.getAttribute("data-pa-file-user")+"-"+t)}t=y(t)}var r="L"+e+"_"+t,s=document.getElementById(r);if(s)a(s);else{var o=document.getElementById("pa-file-"+t);o?Mt(o,(function(){for(var t=$(o).find(".pa-d"+e.charAt(0)),n=e.substr(1),i=0;i<t.length;++i)if(t[i].getAttribute("data-landmark")===n)return t[i].id=r,void a(t[i]);a(!1)})):a(!1)}}function Nt(t,e){var a=null;return Tt(t,e,(function(t){t&&(a=t)})),a}function jt(){var t=this.closest(".pa-psetinfo");nt(j("api/grade",bt(t)),null,"GET").then((function(e){e&&e.ok&&$(t).data("pa-gradeinfo",e).each(_t)}))}jQuery((function(){$(".pa-filediff.need-highlight:not(.need-load)").each(vt)})),function(){function t(t){var e=$(t);e.find(".pa-gradediffers, .pa-save-message").remove();var a=e.find(".pa-pd").first(),n=a.find(".pa-gradedesc");n.length||($(a[0].firstChild).after(' <span class="pa-gradedesc"></span>'),n=a.find(".pa-gradedesc")),n.append('<span class="pa-save-message"><span class="spinner"></span></span>');var i=ct.call(t),r={},s={};e.find("input.pa-gradevalue, textarea.pa-gradevalue, select.pa-gradevalue").each((function(){var t=i.entries[this.name];i.grades&&t&&null!=i.grades[t.pos]?s[this.name]=i.grades[t.pos]:"late_hours"===this.name&&null!=i.late_hours&&(s[this.name]=i.late_hours),"checkbox"!==this.type&&"radio"!==this.type||this.checked?r[this.name]=this.value:"checkbox"===this.type&&(r[this.name]=0)})),e.data("paOutstandingPromise",new Promise((function(a,n){nt(E("api/grade",bt(e[0])),{grades:r,oldgrades:s}).then((function(i){e.removeData("paOutstandingPromise"),i.ok?(e.find(".pa-save-message").html('<span class="savesuccess"></span>').addClass("fadeout"),$(t).closest(".pa-psetinfo").data("pa-gradeinfo",i).each(_t),a(t)):(e.find(".pa-save-message").html('<strong class="err">'+i.error+"</strong>"),n(t))}))})))}I.on("pa-grade",(function(e){e.preventDefault();var a=$(this).data("paOutstandingPromise");a?a.then(t):t(this)}))}(),I.on("pa-grade-button",(function(t){if("keydown"===t.type){var e,a=C(t);if(t.ctrlKey&&("n"===a||"N"===a||"p"===a||"P"===a||"A"===a)&&(e=this.closest(".pa-grade"))){var n=e.getAttribute("data-pa-grade"),i=$(".pa-grade[data-pa-grade="+n+"] .pa-grade-button[data-pa-grade-button="+this.getAttribute("data-pa-grade-button")+"]").filter(":visible"),r=i.toArray().indexOf(this);if(r>=0){if("n"===a||"N"===a||"p"===a||"P"===a){var s=i[(r+("n"===a||"N"===a?1:i.length-1))%i.length],o=s.closest(".pa-dg");o&&$(o).scrollIntoView({marginTop:24,atTop:!0}),s.focus(),$(s).scrollIntoView()}else i.click();t.preventDefault()}}}else"click"===t.type&&I.trigger.call(this,this.getAttribute("data-pa-grade-button"),t)})),$((function(){$(".need-pa-grade").each(wt),$(".need-pa-gradelist").each(At)})),I.on("pa-notes-grade",(function(t){if("keydown"===t.type){var e,a=C(t);if(t.ctrlKey&&("n"===a||"N"===a||"p"===a||"P"===a||"A"===a)&&(e=this.closest(".pa-grade"))){var n=e.getAttribute("data-pa-grade"),i=$(".pa-grade[data-pa-grade="+n+"] .pa-notes-grade").filter(":visible"),r=i.toArray().indexOf(this);if(r>=0){if("n"===a||"N"===a||"p"===a||"P"===a){var s=i[(r+("n"===a||"N"===a?1:i.length-1))%i.length],o=s.closest(".pa-dg");o&&$(o).scrollIntoView({marginTop:24,atTop:!0}),s.focus(),$(s).scrollIntoView()}else i.click();t.preventDefault()}}}else if("click"===t.type){var l=$(this).closest(".pa-grade").find(".pa-gradevalue");l.length&&l.val()!=l.attr("data-pa-notes-grade")&&l.val(l.attr("data-pa-notes-grade")).change(),t.preventDefault()}})),I.on("pa-show-run",(function(){var t=this.closest(".pa-runout").id.substring(10),e=document.getElementById("pa-run-"+t);e.dataset.paTimestamp&&!$(e).is(":visible")?Lt(jQuery(".pa-runner[value='"+t+"']")[0],{unfold:!0}):$t(e,jQuery("#pa-runout-"+t))})),I.on("pa-unfold-file-diff",(function(t){if(t.metaKey)$(".pa-unfold-file-diff").each((function(){$t(St(this),this,!1)}));else{var e=this,a=St(this);Mt(a,(function(){$t(a,e)}))}return!1})),I.on("pa-goto",(function(){$(".pa-line-highlight").removeClass("pa-line-highlight"),Tt(this,null,(function(t){t&&($(t).closest(".pa-filediff").removeClass("hidden"),$e=$(t).closest(".pa-dl"),$e.addClass("pa-line-highlight"),window.scrollTo(0,Math.max($e.geometry().top-Math.max(.1*window.innerHeight,24),0)),f(this.href))}))})),I.on("pa-pset-setgrader",(function(){var t=$(this.closest("form"));jQuery.ajax(t[0].getAttribute("action"),{data:t.serializeWith({}),type:"POST",cache:!1,dataType:"json",success:function(e){var a;t.find(".ajaxsave61").html(e.ok?"Saved":"<span class='error'>Error: "+e.error+"</span>"),e.ok&&(a=t.find("a.actas")).length&&a.attr("href",a.attr("href").replace(/actas=[^&;]+/,"actas="+encodeURIComponent(e.grader_email)))},error:function(){t.find(".ajaxsave61").html("<span class='error'>Failed</span>")}})})),I.on("pa-flag",(function(){var t,e,a=$(this),n=a.closest("form");"flag"!=this.name||n.find("[name=flagreason]").length?"flag"==this.name?$.ajax(n.attr("action"),{data:n.serializeWith({flag:1}),type:"POST",cache:!1,dataType:"json",success:function(t){t&&t.ok&&(n.find(".flagreason").remove(),a.replaceWith("<strong>Flagged</strong>"))},error:function(){n.find(".ajaxsave61").html("<span class='error'>Failed</span>")}}):"resolveflag"==this.name&&$.ajax(n.attr("action"),{data:n.serializeWith({resolveflag:1,flagid:a.attr("data-flagid")}),type:"POST",cache:!1,dataType:"json",success:function(t){t&&t.ok&&a.replaceWith("<strong>Resolved</strong>")},error:function(){n.find(".ajaxsave61").html("<span class='error'>Failed</span>")}}):(a.before('<span class="flagreason">Why do you want to flag this commit? &nbsp;<input type="text" name="flagreason" value="" placeholder="Optional reason" /> &nbsp;</span>'),n.find("[name=flagreason]").on("keypress",(t="Enter",e=function(){a.click()},function(a){M(a)||C(a)!==t||(a.preventDefault(),a.stopImmediatePropagation(),e.call(this,a))})).autogrow()[0].focus(),a.html("OK"))}));var Et=function(){var t={0:!1,1:{b:!0},2:{f:!0},3:{i:!0},4:{u:!0},5:{bl:!0},7:{rv:!0},8:{x:!0},9:{s:!0},21:{du:!0},22:{b:!1,f:!1},23:{i:!1},24:{u:!1},25:{bl:!1},27:{rv:!1},28:{x:!1},29:{s:!1},30:{fg:0},31:{fg:1},32:{fg:2},33:{fg:3},34:{fg:4},35:{fg:5},36:{fg:6},37:{fg:7},38:"fg",39:{fg:!1},40:{bg:0},41:{bg:1},42:{bg:2},43:{bg:3},44:{bg:4},45:{bg:5},46:{bg:6},47:{bg:7},48:"bg",49:{bg:!1},90:{fg:8},91:{fg:9},92:{fg:10},93:{fg:11},94:{fg:12},95:{fg:13},96:{fg:14},97:{fg:15},100:{bg:8},101:{bg:9},102:{bg:10},103:{bg:11},104:{bg:12},105:{bg:13},106:{bg:14},107:{bg:15}},e={b:1,f:2,i:3,u:4,bl:5,rv:7,x:8,s:9,du:21};function n(e,a){var n;if(1===arguments.length&&(a=e,e=null),!a||"[m"===a||"[0m"===a)return null;n=""===a.charAt(0)?a.substring(2,a.length-1).split(";"):a.split(";");for(var i=0;i<n.length;++i){var r=t[parseInt(n[i])];if(!1===r)e=null;else if(r){if("object"==typeof r)for(var s in r)!1!==r[s]?(e=e||{})[s]=r[s]:e&&delete e[s];else if("fg"===r||"bg"===r){var o,l,u;if(e=e||{},i+4<n.length&&2===parseInt(n[i+1]))o=parseInt(n[i+2]),l=parseInt(n[i+3]),u=parseInt(n[i+4]),o<=255&&l<=255&&u<=255&&(e[r]=[o,l,u]);else if(i+2<n.length&&5===parseInt(n[i+1])){var d=parseInt(n[i+1]);d<=15?e[r]=d:d<=231?(o=(d-16-(u=(d-16)%6)-6*(l=(d-16-u)/6%6))/36,e[r]=[51*o,51*l,51*u]):d<=255&&(u=Math.round(255*(d-232)/23),e[r]=[u,u,u])}}}else;}return e&&$.isEmptyObject(e)?null:e}return function(t,i,r){var s=!1;if("string"==typeof t&&(r=i,i=t,t=document.createElement("div"),s=!0),r&&r.clear)for(t.removeAttribute("data-pa-terminal-style"),t.removeAttribute("data-pa-outputpart");t.firstChild;)t.removeChild(t.firstChild);var o,l,u=t.getAttribute("data-pa-terminal-style"),d=null;function h(t,a){t.appendChild(function(t,a){if("string"==typeof t?t=document.createTextNode(t):t instanceof jQuery&&(t=t[0]),!a||"[m"===a||"string"==typeof a&&!(a=n(a)))return t;var i=document.createElement("span"),r=[];for(var s in e)a[s]&&r.push("ansi"+s);return a.fg&&("number"==typeof a.fg?r.push("ansifg"+a.fg):i.styles.foregroundColor=w("#%02x%02x%02x",a.fg[0],a.fg[1],a.fg[2])),a.bg&&("number"==typeof a.bg?r.push("ansibg"+a.bg):i.styles.backgroundColor=w("#%02x%02x%02x",a.bg[0],a.bg[1],a.bg[2])),r.length&&(i.className=r.join(" ")),i.appendChild(t),i}(a,u))}function c(t){d||(d=document.createDocumentFragment()),d.appendChild(t)}function p(t,a){return/^\x1b\[[\d;]*m$/.test(a)?function(t){if(!t)return"[m";var a=[];for(var n in e)t[n]&&a.push(e[n]);return t.fg&&("number"==typeof t.fg?a.push(t.fg<8?30+t.fg:90+t.fg-8):a.push(38,2,t.fg[0],t.fg[1],t.fg[2])),t.bg&&("number"==typeof t.bg?a.push(t.bg<8?40+t.bg:100+t.bg-8):a.push(48,2,t.bg[0],t.bg[1],t.bg[2])),"["+a.join(";")+"m"}(n(n(null,t),a)):t}function f(t,e){return""!==t&&t.charAt(t.length-1)===e}function g(t){return $(".pa-filediff").filter((function(){return this.getAttribute("data-pa-file")===t}))}function m(t,e){var a,n,i=!e,s=0;for(i&&(e=document.createElement("span")),/\r/.test(t)&&(t=function(t){var e=/\n$/.test(t);if(e&&t.indexOf("\r")===t.length-1)return t.substring(0,t.length-2)+"\n";var a,n=u||"[m",i=(e?t.substr(0,t.length-1):t).split(/\r/),r=[];for(a=0;a<i.length;++a){for(var s=[],o=0,l=null,d=i[a].split(/(\x1b\[[\d;]*m|\x1b\[0?K)/),h=0;h<d.length;h+=2)""!==d[h]&&(s.push(n,d[h]),o+=d[h].length),h+1<d.length&&(f(d[h+1],"K")?l=o:n=p(n,d[h+1]));for(var c=0;c<r.length&&o>=r[c+1].length;)o-=r[c+1].length,c+=2;for(;c<r.length&&o<r[c+1].length&&null===l;)s.push(r[c],r[c+1].substr(o)),o=0,c+=2;r=s}return r.push(n),e&&r.push("\n"),r.join("")}(t));a=t.match(/^(\x1b\[[\d;]*m|\x1b\[\d*K)([^]*)$/);)u=p(u,a[1]),t=a[2];for(((a=t.match(/^([ \t]*)([^:\s]+):(\d+)(?=:)/))||(a=t.match(/^([ \t]*)file \"(.*?)\", line (\d+)/i)))&&function(t,e,a,n,i){for(var s;s=a.match(/^(\x1b\[[\d;]*m|\x1b\[\d*K)([^]*)$/);)u=p(u,s[1]),a=s[2];var o=g(a);if(!o.length&&r&&r.directory&&(o=g(a=r.directory+a)),o.length){e.length&&h(t,e);var l="Lb"+n+"_"+y(a),d=$('<a href="#'+l+'" class="uu uic pa-goto"></a>');return d.text(i.substring(e.length).replace(/(?:\x1b\[[\d;]*m|\x1b\[\d*K)/g,"")),h(t,d),!0}return!1}(e,a[1],a[2],a[3],a[0])&&(s=a[0].length,t=t.substr(s));""!==t;){if(n=t,a=t.match(/^(.*?)(\x1b\[[\d;]*m|\x1b\[\d*K)([^]*)$/)){if(""===a[1]){u=p(u,a[2]),t=a[3];continue}n=a[1]}s+n.length>133||s+n.length==133&&"\n"!==n.charAt(132)?(h(e,n=n.substr(0,132-s)),e.className="pa-rl-continues",i&&c(e),e=document.createElement("span"),i=!0,s=0):(h(e,n),s+=n.length),t=t.substr(n.length)}i&&c(e)}"string"==typeof i?((o=i.split(/^/m)).length&&""===o[o.length-1]&&o.pop(),l=o.length&&f(o[o.length-1],"\n")):(o=[],l=!0,d=i);var v=t.lastChild,b=null;if(v&&v.lastChild&&a(v.lastChild,"pa-runcursor")&&(b=v.lastChild,v.removeChild(b)),v&&null!==(i=v.getAttribute("data-pa-outputpart"))&&""!==i&&o.length){for(;v.firstChild;)v.removeChild(v.firstChild);o[0]=i+o[0],v.removeAttribute("data-pa-outputpart")}else v&&(o.length||d)&&(v.appendChild(document.createTextNode("\n")),v.removeAttribute("data-pa-outputpart")),v=null;var x,A,_,k=u;for(x=0;x<o.length;x=A){for(k=u,_=o[x],A=x+1;!f(_,"\n")&&A<o.length;++A)_+=o[A];A==o.length&&l&&(_=_.substring(0,_.length-1)),m(_,x?null:v)}r&&r.cursor&&!t.lastChild&&!d&&c(""),d&&t.appendChild(d);var C=t.childNodes.length;if(C>=4e3){for(x=t.firstChild;"DIV"===x.tagName&&"pa-rl-group"===x.className;)x=x.nextSibling,--C;for(var M=null,S=0;x&&(A=x.nextSibling);)(!M||S>=4e3&&C>=2e3)&&((M=document.createElement("div")).className="pa-rl-group",t.insertBefore(M,x),S=0),t.removeChild(x),M.appendChild(x),x=A,++S,--C}if(r&&r.cursor&&(b||((b=document.createElement("span")).className="pa-runcursor"),t.lastChild.appendChild(b)),!l&&t.lastChild&&(u=k,t.lastChild.setAttribute("data-pa-outputpart",_)),null!=u?t.setAttribute("data-pa-terminal-style",u):t.removeAttribute("data-pa-terminal-style"),s)return t.innerHTML}}();function Lt(t,e){var i,s,o,l,u,d,h=$(t).closest("form"),c=t.getAttribute("data-pa-run-category")||t.value,p=$(t).closest(".pa-psetinfo").attr("data-pa-directory"),f=document.getElementById("pa-run-"+c),g=$(f).find("pre");if("object"!=typeof e&&(e={}),e.unfold&&f.dataset.paTimestamp)s=+f.dataset.paTimestamp;else{if(h.prop("outstanding"))return!0;h.find("button").prop("disabled",!0),h.prop("outstanding",!0)}function m(){i||!a(f,"pa-run-short")&&!f.hasAttribute("data-pa-runbottom")||requestAnimationFrame((function(){f.scrollHeight>f.clientHeight&&r(f,"pa-run-short"),f.hasAttribute("data-pa-runbottom")&&(f.scrollTop=Math.max(f.scrollHeight-f.clientHeight,0))}))}delete f.dataset.paTimestamp,$t(f,jQuery("#pa-runout-"+c).removeClass("hidden"),!0),s||e.noclear?f.lastChild&&$(f.lastChild).find("span.pa-runcursor").remove():(g.html(""),n(g[0].parentElement,"pa-run-short"),g[0].removeAttribute("data-pa-terminal-style"),$(f).children(".pa-runrange").remove()),f.dataset.paXtermJs&&"false"!==f.dataset.paXtermJs&&window.Terminal&&(r(g[0].parentElement,"pa-run-short"),n(g[0].parentElement,"pa-run-xterm-js"),(i=new Terminal({cols:(o=80,l=132,u=$('<span style="position:absolute">0</span>').appendTo(g),d=Math.trunc(g.width()/u.width()/1.33),u.remove(),Math.max(o,Math.min(d,l))),rows:25})).open(g[0]),i.attachCustomKeyEventHandler((function(t){if("keydown"===t.type){var e=C(t),a=M(t);"Enter"!==e||a?"Escape"!==e||a?"Backspace"!==e||a?e>="a"&&e<="z"&&(14&a)===M.CTRL?e=String.fromCharCode(e.charCodeAt(0)-96):1===e.length&&0==(14&a)&&C.printable(t)||(e=""):e="\b":e="":e="\r",""!==e&&D({write:e})}return!1}))),f.hasAttribute("data-pa-opened")||(f.setAttribute("data-pa-opened","true"),i||(f.setAttribute("data-pa-runbottom","true"),f.addEventListener("scroll",(function(){requestAnimationFrame((function(){f.scrollTop+f.clientHeight>=f.scrollHeight-10?f.setAttribute("data-pa-runbottom","true"):f.removeAttribute("data-pa-runbottom")}))})),m()));var v="",b=-1,x=50,y=null,A=null;function _(){i?i.write("[?25l"):f.lastChild&&$(f.lastChild).find(".pa-runcursor").remove()}function T(){h.find("button").prop("disabled",!1),h.prop("outstanding",!1),_(),t.hasAttribute("data-pa-run-grade")&&jt.call(t.closest(".pa-psetinfo"))}function N(t){i?i.write(t):Et(g[0],t,{cursor:!0,directory:p})}function j(t){"string"==typeof t&&(t=$(t)[0]),i?window.console&&console.log("xterm.js cannot render "+t):Et(g[0],t,{cursor:!0})}function E(t,a){if(null!==v){var n=(v+=t).indexOf("\n\n");if(n<0)return;t=v.substr(n+2),v=null;var r="";a&&a.timestamp&&(r="...started "+k("%l:%M:%S%P %e %b %Y",new Date(1e3*a.timestamp))),i?(""!==r&&(r="[3;1;38;5;86m"+r+"[m\r\n"),e.noclear||(r="c"+r),t=r+t):(e.noclear||g.html(""),""!==r&&j('<span class="pa-runtime">'+r+"</span>"))}""!==t&&N(t)}function L(t,e){var i,s,o,l,u,d,h,p,g,b;function x(){i&&(i.value=h,s.innerHTML=w("%d:%02d.%03d",Math.trunc(h/6e4),Math.trunc(h/1e3)%60,Math.trunc(h)%1e3))}function y(e){if(null===e){if(!g)return;e=((new Date).getTime()-d)*b}var a=u;if((a>=A.length||e<A[a])&&(a=0),a+2<A.length&&e>=A[a])for(var i=A.length;a<i;){var r=a+(i-a>>1&-2);e<=A[r]?i=r:a=r+2}for(;a<A.length&&e>=A[a];)a+=2;h=e,a<u&&(v="",u=0);var s=t.data;E(s.substring(u<A.length?A[u+1]:s.length,a<A.length?A[a+1]:s.length),t),m(),x(),u=a,p&&(p=clearTimeout(p)),g&&(u<A.length?p=setTimeout(y,Math.min(100,(A[u]-(u?A[u-2]:0))/b),null):(o&&n(o,"paused"),_()))}A||("string"==typeof(A=t.time_data)&&(A=function(t){for(var e=[0,0],a=0;a<t.length;){var n=t.indexOf(",",a);if(n<0)break;var i=t.indexOf("\n",n+1);i<0&&(i=t.length),e.push(+t.substring(a,n),+t.substring(n+1,i)),a=i+1}return e}(A)),b=t.time_factor,A.length>2&&(i=$('<div class="pa-runrange"><button type="button" class="pa-runrange-play"></button><input type="range" class="pa-runrange-range" min="0" max="'+A[A.length-2]+'"><span class="pa-runrange-time"></span><span class="pa-runrange-speed-slow" title="Slow">🐢</span><input type="range" class="pa-runrange-speed" min="0.1" max="10" step="0.1"><span class="pa-runrange-speed-fast" title="Fast">🐇</span></div>').prependTo(f),s=i[0].lastChild,o=i[0].firstChild,i=o.nextSibling,l=(s=i.nextSibling).nextSibling.nextSibling,i.addEventListener("input",(function(t){g=!1,n(o,"paused"),y(+this.value)}),!1),o.addEventListener("click",(function(t){a(o,"paused")?(r(o,"paused"),g=!0,d=(new Date).getTime(),h<A[A.length-2]&&(d-=h/b),y(null)):(n(o,"paused"),g=!1)}),!1),l.addEventListener("input",(function(t){b=+this.value,S.site(!1,"pa-runspeed-"+c,[b,(new Date).getTime()]),g&&(d=(new Date).getTime()-h/b,y(null))}),!1)),(u=S.site_json(!1,"pa-runspeed-"+c))&&u[1]>=(new Date).getTime()-864e5&&(b=u[0]),(b<.1||b>10)&&(b=1),l&&(l.value=b),t={data:t.data,timestamp:t.timestamp},e?(u=A.length,h=A[u-2],g=!1,o&&n(o,"paused"),x()):(u=0,h=0,d=(new Date).getTime(),g=!0,A.length&&y(null)))}function O(t){var e,n;if(y&&g.find("span.pa-runqueue").remove(),t&&t.onqueue)return y=t.queueid,n="On queue, "+t.nahead+(1==t.nahead?" job":" jobs")+" ahead",t.headage&&(n+=", oldest began about "+(e=t.headage<10?t.headage:5*Math.round(t.headage/5+.5))+(1==e?" second":" seconds")+" ago"),g[0].insertBefore($("<span class='pa-runqueue'>"+n+"</span>")[0],g[0].lastChild),void setTimeout(D,1e4);if(t&&"working"==t.status?$("#pa-runstop-"+c).length||$('<button id="pa-runstop-'+c+'" class="btn btn-danger pa-runstop" type="button">Stop</button>').click(P).appendTo("#pa-runout-"+c+" > h3"):$("#pa-runstop-"+c).remove(),!t||!t.ok)return e="Unknown error",t&&t.loggedout?e="You have been logged out (perhaps due to inactivity). Please reload this page.":t&&(t.error_text?e=t.error_text:t.error&&!0!==t.error?e=t.error:t.message&&(e=t.message)),N("[1;3;31m"+e+"[m\r\n"),m(),T();if(s=s||t.timestamp,t.data&&t.offset<b&&(t.data=t.data.substring(b-t.offset)),t.data){if(b=t.lastoffset,t.done&&null!=t.time_data&&""===v)return void L(t);E(t.data,t),x=100}t.result&&(null!==v&&E("\n\n",t),E(t.result,t)),t.data||t.result||(x=Math.min(2*x,500)),m(),"old"==t.status?setTimeout(D,2e3):t.done?(T(),t.timed&&!a(f.firstChild,"pa-runrange")&&D({offset:0},I)):setTimeout(D,x)}function I(t){t.data&&t.done&&null!=t.time_data&&L(t,!0)}function D(t,e){var a={};h[0].run||(a.run=c),a.offset=b,s&&(a.check=s),y&&(a.queueid=y),t&&$.extend(a,t),jQuery.ajax(h.attr("action"),{data:h.serializeWith(a),type:"POST",cache:!1,dataType:"json",success:e||O,timeout:3e4,error:function(){h.find(".ajaxsave61").html("Failed"),h.prop("outstanding",!1)}})}function P(){D({stop:1})}return e.headline&&e.noclear&&!i&&g[0].firstChild&&N("\n\n"),e.headline&&e.headline instanceof Node?j(e.headline):e.headline&&N("[1;37m"+e.headline+"[m\n"),e.unfold&&f.getAttribute("data-pa-content")&&N(f.getAttribute("data-pa-content")),f.removeAttribute("data-pa-content"),m(),D(),!1}I.on("pa-runner",(function(){Lt(this)}));var Ot=function(t){function e(e,a){for(var n=t("#pa-runsettings"),i=n.find(".n").length;n.find("[data-runsetting-num="+i+"]").length;)++i;var r=t('<div class="pa-p" data-runsetting-num="'+i+'"><div class="pa-pt"></div><div class="pa-pd"><input name="n'+i+'" class="uich pa-runconfig ignore-diff n" size="30" placeholder="Name"> &nbsp; <input name="v'+i+'" class="uich pa-runconfig ignore-diff v" size="40" placeholder="Value"></div></div>');e&&(r.find(".n").val(e),r.find(".v").val(a)),n.append(r),e||r.find(".n").focus()}return I.on("pa-runconfig",(function(a){"define"===this.name?e():function(){var e,a,n,i=t("#pa-runsettings .pa-p"),r={};for(e=0;e!=i.length;++e)a=t.trim(t(i[e]).find(".n").val()),n=t.trim(t(i[e]).find(".v").val()),""!=a&&(r[a]=n);t.ajax(i.closest("form").attr("action"),{data:{runsettings:r},type:"POST",cache:!1,dataType:"json"})}()})),{add:e,load:function(a){var n,i,r=t("#pa-runsettings"),s=r.find(".n");for(i in s.attr("data-outstanding","1"),a){for(n=0;n!=s.length&&t.trim(t(s[0]).val())!=i;++n);n==s.length?e(i,a[i]):t.trim(r.find("[name=v"+n+"]").val())!=a[i]&&(r.find("[name=v"+n+"]").val(a[i]),t(s[n]).removeAttr("data-outstanding"))}for(n=0;n!=s.length;++n)t(s[n]).attr("data-outstanding")&&t("[data-runsetting-num="+t(s[n]).attr("name").substr(1)+"]").remove()}}}(jQuery);function It(t,e){"string"==typeof t&&(t=JSON.parse(t));for(var a=0,n=0;n<t.order.length;++n){var i=t.order[n],r=i?t.entries[i]:null;!r||!r.in_total||e&&r.is_extra||(a+=t.grades&&t.grades[n]||0)}return[Math.round(1e3*a)/1e3,Math.round(1e3*t.maxtotal)/1e3]}function Dt(t){if(!t.cdf&&t.xcdf){for(var e=t.xcdf,a=[],n=0,i=0;n<e.length;)i+=e[n+1].length,a.push(e[n],i),n+=2;t.cdf=a}return t.cdf}function Pt(t){var e=t.cdf||t.xcdf;return e.length?e[e.length-2]:0}function Rt(t){var e,a,n=0,i=this.getTotalLength();if(n!=i){for(;i-n>.5;)if(e=n+(i-n)/2,(a=this.getPointAtLength(e)).x>=t+.25)i=e;else{if(a.x>=t-.25)return a.y;n=e}if((a=this.getPointAtLength(i===e?n:i)).x>=t-.25&&a.x<=t+.25)return a.y}return null}function Ft(t,e,a,n){var i=e.max,r=e.min,s=(i-r)*a,o=1/s;function l(t){return t>=-s&&t<=s?.75*o*(1-(t*=o)*t):0}var u,d=[];for(u=0;u!==n+1;++u)d.push(0);var h=Dt(t),c=(i-r)/n,p=1/c;for(u=0;u<h.length;u+=2)for(var f=h[u+1]-(0===u?0:h[u-1]),g=Math.floor((h[u]-r-s)*p),m=Math.ceil((h[u]-r+s)*p);g<m;){var v=Math.max(-1,Math.min(n+1,g));v>=0&&v<=n&&(d[v]+=l(g*c-h[u]+r)*f),++g}var b=0;if(t.n){var x=1/t.n;for(u=0;u!==n+1;++u)d[u]*=x,b=Math.max(b,d[u])}return{data:t,kde:d,maxp:b,binwidth:c}}function Wt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}var Ht=function(){var t={m:2,M:2,z:0,Z:0,l:2,L:2,h:1,H:1,v:1,V:1,c:6,C:6,s:4,S:4,q:4,Q:4,t:2,T:2,a:7,A:7,b:1,B:1},e={},a=0;var n=!1;function i(i){if(i instanceof SVGPathElement&&(i=i.getAttribute("d")),e[i])return e[i];for(var r,s,o,l,u,d,c=[],p=0,f=0,g=0,m=0,v=!1,b=0,x=0,y=1,w=function(e){e instanceof SVGPathElement&&(e=e.getAttribute("d")),e=e.split(/([a-zA-Z]|[-+]?(?:\d+\.?\d*|\.\d+)(?:[Ee][-+]?\d+)?)/);var a,n=1,i=e.length;return function(){for(var r,s=null;n<i;){if((r=e[n])>="A"){if(s)break;s=[r],a=r,"m"!==r&&"M"!==r&&"z"!==r&&"Z"!==r||(a="m"===r||"z"===r?"l":"L")}else{if(!s&&a)s=[a];else if(!s||s.length===t[s[0]]+1)break;s.push(+r)}n+=2}return s}}(i);l=w();)if("b"!==(u=l[0])&&"B"!==u)if("z"!==u&&"Z"!==u){if(1==t[u]&&(1==l.length?l=["L"]:"h"===u?l=["l",l[1],0]:"H"===u?l=["L",l[1],f]:"v"===u?l=["l",0,l[1]]:"V"===u&&(l=["L",p,l[1]])),(u=l[0])>="a"&&!b)for(r="a"!==u?1:6;r<l.length;r+=2)l[r]+=p,l[r+1]+=f;else if(u>="a")for("a"===u&&(l[3]+=b),r="a"!==u?1:6;r<l.length;r+=2)s=l[r],o=l[r+1],l[r]=p+s*y+o*x,l[r+1]=f+s*x+o*y;for(u=l[0]=u.toUpperCase();l.length<t[u]+1;)l.push(g,m);"S"===u?(s=o=0,d&&"C"===d[0]&&(s=p-d[3],o=f-d[4]),l=["C",p+s,f+o,l[1],l[2],l[3],l[4]],u="C"):"T"===u&&(s=o=0,d&&"Q"===d[0]&&(s=p-d[1],o=f-d[2]),l=["Q",p+s,f+o,l[1],l[2]],u="Q"),v||"M"===u||(0!==c.length&&"Z"!==c[c.length-1][0]&&c.push(["M"]),v=!0),"M"===u?(g=l[1],m=l[2],v=!1):"L"===u?c.push(["L",p,f,l[1],l[2]]):"C"===u?c.push(["C",p,f,l[1],l[2],l[3],l[4],l[5],l[6]]):"Q"===u?c.push(["C",p,f,p+2*(l[1]-p)/3,f+2*(l[2]-f)/3,l[3]+2*(l[1]-l[3])/3,l[4]+2*(l[2]-l[4])/3,l[3],l[4]]):(1==++n&&h("bad normalize_svg_path "+u),c.push(l)),d=l,p=l[l.length-2],f=l[l.length-1]}else d=c.length?c[c.length-1]:null,v&&(p==g&&f==m||c.push(["L",p,f,g,m]),c.push(["Z"]),v=!1),p=g,f=m;else b="b"===u?b+l[1]:l[1],y=Math.cos(b),x=Math.sin(b);return a>=1e3&&(e={},a=0),e[i]=c,++a,c}return{closestPoint:function(t,a,n){if(n&&!function(t,e,a){function n(t,n,i,r){return t-e[0]>=a||e[0]-i>=a||n-e[1]>=a||e[1]-r>=a}if("clientX"in e){var r=t.getBoundingClientRect(),s=e[0]-e.clientX,o=e[1]-e.clientY;if(r&&n(r.left+s,r.top+o,r.right+s,r.bottom+o))return!1}for(var l,u,d,h,c=i(t),p=0;p!==c.length;++p){var f=c[p];if("L"===f[0])l=Math.min(f[1],f[3]),u=Math.min(f[2],f[4]),d=Math.max(f[1],f[3]),h=Math.max(f[2],f[4]);else{if("C"!==f[0]){if("Z"===f[0]||"M"===f[0])continue;return!0}l=Math.min(f[1],f[3],f[5],f[7]),u=Math.min(f[2],f[4],f[6],f[8]),d=Math.max(f[1],f[3],f[5],f[7]),h=Math.max(f[2],f[4],f[6],f[8])}if(!n(l,u,d,h))return!0}return!1}(t,a,n.distance))return n;var r,s,o,l,u=t.getTotalLength(),d=((l=t)instanceof SVGPathElement&&(l=l.getAttribute("d")),e[l]?e[l].length:l.replace(/[^A-DF-Za-df-z]+/g,"").length),h=Math.max(u/d/8,4),c=n?(n.distance+.01)*(n.distance+.01):1/0;function p(e){var n=t.getPointAtLength(e),i=a[0]-n.x,o=a[1]-n.y,l=i*i+o*o;return l<c&&(r=[n.x,n.y],s=e,c=l),n}if(d>20){var f,g,m=function(t,e){var a=i(t);function n(t,a,n,i){var r=e[0]<t?t-e[0]:e[0]>n?e[0]-n:0,s=e[1]<a?a-e[1]:e[1]>i?e[1]-i:0;return Math.max(r,s)}var r,s,o=1/0,l=-1/0,u=24;for(r=0;r!==a.length;++r)"L"===(s=a[r])[0]?(o=Math.min(o,s[1],s[3]),l=Math.max(l,s[1],s[3])):"C"===s[0]&&(o=Math.min(o,s[1],s[3],s[5],s[7]),l=Math.max(l,s[1],s[3],s[5],s[7]));o-=u,l+=u;var d,h,c,p,f,g=Math.max(Math.ceil((l-o)/u),1),m=new Array(g+1);for(m.fill(1/0),r=0;r!==a.length;++r){if("L"===(s=a[r])[0])d=Math.min(s[1],s[3]),h=Math.min(s[2],s[4]),c=Math.max(s[1],s[3]),p=Math.max(s[2],s[4]);else{if("C"!==s[0])continue;d=Math.min(s[1],s[3],s[5],s[7]),h=Math.min(s[2],s[4],s[6],s[8]),c=Math.max(s[1],s[3],s[5],s[7]),p=Math.max(s[2],s[4],s[6],s[8])}for(f=n(d,h,c,p),d=Math.floor((d-o)/u),c=Math.ceil((c-o)/u);d<=c;)m[d]=Math.min(m[d],f),++d}for(r=0;r!==m.length;++r)m[r]<1/0&&(m[r]=m[r]*m[r]);return m.xmin=o,m.xmax=l,m.width=u,m.point=e,m}(t,a),v=m.xmin,b=m.width;for(o=0;o<u;)f=p(o),m[g=Math.floor((f.x-v)/b)]>c&&m[g-1]>c&&m[g+1]>c?o+=b:o+=h}else for(o=0;o<u;o+=h)p(o);p(u);do{(o=s-h/2)>0&&p(o),(o+=h)<u&&p(o),h/=2}while(h>.5);return r&&(r.distance=Math.sqrt(c),r.pathNode=t,r.pathLength=s),r&&(!n||r.distance<=n.distance+.01)?r:n},tangentAngle:function(t,e){var a=Math.max(0,e-.25);a==e&&(e+=.25);var n=t.getPointAtLength(a),i=t.getPointAtLength(e);return Math.atan2(i.y-n.y,i.x-n.x)},event_to_point:function(t,e){var a,n=t.ownerSVGElement||t;if(n.createSVGPoint)(a=n.createSVGPoint()).x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse());else{var i=t.getBoundingClientRect();a={x:e.clientX-i.left-t.clientLeft,y:e.clientY-i.top-t.clientTop}}var r=[a.x,a.y];return r.clientX=e.clientX,r.clientY=e.clientY,r}}}();function Bt(){this.is=[]}function Ut(t,e,a){var n=$(t),i=a.indexOf("noextra")>=0?e.noextra:e.all,r=function(t){var e=t.cdf||t.xcdf;return e.length?e[0]:0}(i),s=s<0?s-1:0;e.entry&&"letter"===e.entry.type&&(s=Math.min(65,r<0?r:Math.max(r-5,0))),this.min=s,this.max=Pt(i),e.maxtotal&&(this.max=Math.max(this.max,e.maxtotal)),this.total=e.maxtotal,this.cutoff=e.cutoff,this.svg=Wt("svg"),this.gg=Wt("g"),this.gx=Wt("g"),this.gy=Wt("g"),this.xl=this.xt=!0,this.yl=this.yt="pdf"!==a.substring(0,3),this.tw=n.width(),this.th=n.height(),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.setAttribute("width",this.tw),this.svg.setAttribute("height",this.th),this.svg.setAttribute("overflow","visible"),this.svg.appendChild(this.gg),this.gx.setAttribute("class","pa-gg-axis pa-gg-xaxis"),this.svg.appendChild(this.gx),this.gy.setAttribute("class","pa-gg-axis pa-gg-yaxis"),this.svg.appendChild(this.gy),this.maxp=0,this.hoveranno=null,this.hoveron=!1,n.html(this.svg);var o=Wt("text");o.appendChild(document.createTextNode("888")),this.gx.appendChild(o);var l=o.getBBox();if(this.xdw=l.width/3,this.xdh=l.height,this.gx.removeChild(o),this.xlw=this.xdw*(Math.floor(Math.log10(this.max))+1),this.mt=Math.ceil(Math.max(this.yl?this.xdh/2:0,2)),this.mr=Math.ceil(this.xl?this.xlw/2:0),this.mb=(this.xt?5:0)+(this.xl?this.xdh+3:0),this.yl){var u=this.th-this.mt-Math.max(this.mb,Math.ceil(this.xdh/2));if(u>this.xdh){var d=n.hasClass("pa-grgraph-min-yaxis");this.yfmt=d?"%.0r%%":"%.0r";var h=u/this.xdh;this.ymax=100,this.ylu=h>15?10:h>5?25:h>3?50:100,this.ml=5+(this.yt?5:0)+(d?4.2:3)*this.xdw,n.hasClass("pa-grgraph-min-yaxis")||(this.yltext=Wt("text"),this.yltext.appendChild(document.createTextNode("% of grades")),this.gy.appendChild(this.yltext),(l=this.yltext.getBBox()).width<=.875*u?this.ml+=.5*this.xdw+this.xdh:(this.gy.removeText(this.yltext),this.yltext=null)),this.mb=Math.max(this.mb,Math.ceil(this.xdh/2))}else this.yl=!1,this.ml=0,this.mt=2}else this.ml=this.yt?5:0;this.xl&&(this.ml=Math.max(this.ml,Math.ceil(this.xdw/2))),this.gw=this.tw-this.ml-this.mr;var c=this.gh=this.th-this.mt-this.mb,p=this.gw/(this.max-this.min);if(this.xax=function(t){return(t-s)*p},this.yax=function(t){return c-t*c},this.unxax=function(t){return t/p+s},this.unyax=function(t){return-(t-c)/c},e.entry&&e.entry.type){var f=rt[e.entry.type];f&&f.tics&&(this.xtics=f.tics.call(f))}this.max-this.min>900?this.xfmt="%.0r":this.max-this.min>10?this.xfmt="%.1r":this.xfmt="%.3r",this.gg.setAttribute("transform","translate("+this.ml+","+this.mt+")"),this.gx.setAttribute("transform","translate("+this.ml+","+(this.mt+this.gh+(this.xt?2:-5))+")"),this.gy.setAttribute("transform","translate("+(this.ml+(this.yt?-2:5))+","+this.mt+")")}function Qt(t){var e=t.data("paGradeData");if(!e)return t.addClass("hidden"),void t.removeData("paGradeGraph");var a=t.closest(".pa-psetinfo"),i=!a.length||a[0].hasAttribute("data-pa-user-extension"),s=[];e.extension&&a.length&&i&&s.push("cdf-extension","pdf-extension"),s.push("cdf","pdf"),e.extension&&!a.length&&s.push("cdf-extension","pdf-extension"),e.noextra&&s.push("cdf-noextra","pdf-noextra"),s.push("all"),t[0].setAttribute("data-pa-gg-types",s.join(" "));var o=t[0].getAttribute("data-pa-gg-type");if(o||(o=S(!0,"pa-gg-type")),!o){var l=S(!1,"pa-gg-type");if(l&&"{"===l[0])try{"string"==typeof(l=JSON.parse(l)).type&&"number"==typeof l.at&&l.at>=_()-7200&&(o=l.type)}catch(t){}}o&&"default"!==o||(o=s[0]),s.indexOf(o)<0&&(o="pdf"===o.substring(0,3)?s[1]:s[0]),t[0].setAttribute("data-pa-gg-type",o),t.removeClass("cdf pdf all cdf-extension pdf-extension all-extension cdf-noextra pdf-noextra all-noextra"),t.addClass(o);var u="all"===o.substring(0,3),d=(o.substring(0,3),u||o.substring(0,3),o.indexOf("-extension")>=0||u&&i&&e.extension),h=o.indexOf("-noextra")>=0||u&&e.noextra&&!d,c=0;h&&(c=Math.max(c,Pt(e.noextra))),d&&(c=Math.max(c,Pt(e.extension))),(u||!h&&!d)&&(c=Math.max(c,Pt(e.all)));e.maxtotal&&Math.max(c,e.maxtotal);t.removeClass("hidden");var p=t.find(".plot");p.length||(p=t);var f=new Ut(p[0],e,o);(t.data("paGradeGraph",f),f.total&&f.total<f.max)&&((y=Wt("line")).setAttribute("x1",f.xax(f.total)),y.setAttribute("y1",f.yax(0)),y.setAttribute("x2",f.xax(f.total)),y.setAttribute("y2",f.yax(1)),y.setAttribute("class","pa-gg-anno-total"),f.gg.appendChild(y));var g=Math.ceil((f.max-f.min)/2),m=.08,v=[];for(var b in"pdf-extension"===o&&(v.extension=Ft(e.extension,f,m,g)),"pdf-noextra"===o&&(v.noextra=Ft(e.noextra,f,m,g)),"pdf"===o&&(v.main=Ft(e.all,f,m,g)),v)f.maxp=Math.max(f.maxp,v[b].maxp);if("pdf-noextra"===o&&f.append_pdf(v.noextra,"pa-gg-pdf pa-gg-noextra"),"pdf"===o&&f.append_pdf(v.main,"pa-gg-pdf"),"pdf-extension"===o&&f.append_pdf(v.extension,"pa-gg-pdf pa-gg-extension"),("cdf-noextra"===o||"all"===o&&e.noextra)&&f.append_cdf(e.noextra,"pa-gg-cdf pa-gg-noextra"),"cdf"!==o&&"all"!==o||f.append_cdf(e.all,"pa-gg-cdf"),("cdf-extension"===o||"all"===o&&e.extension&&i)&&f.append_cdf(e.extension,"pa-gg-cdf pa-gg-extension"),e.cutoff&&"pdf"!==o.substring(0,3)){var x=Wt("rect");x.setAttribute("x",f.xax(0)),x.setAttribute("y",f.yax(e.cutoff)),x.setAttribute("width",f.xax(f.max)),x.setAttribute("height",f.yax(0)-f.yax(e.cutoff)),x.setAttribute("fill","rgba(255,0,0,0.1)"),f.gg.appendChild(x)}var y=null,w=a.data("pa-gradeinfo");w&&(y=It(w,h&&!u)[0]),null!=y&&f.annotate_last_curve(y),f.xaxis(),f.yaxis(),t[0].hasAttribute("data-pa-highlight")&&f.highlight_users(),f.hover(),t.find(".statistics").each((function(){var t=f.last_curve_data,e=[];if(t&&t.mean&&e.push("mean "+t.mean.toFixed(1)),t&&t.median&&e.push("median "+t.median.toFixed(1)),t&&t.stddev&&e.push("stddev "+t.stddev.toFixed(1)),e=[e.join(", ")],t&&null!=y){var a=function(t,e){for(var a=Dt(t),n=0,i=a.length;n<i;){var r=n+2*(i-n>>2);a[r]>=e?i=r:n=r+2}return a[n+1]}(t,y);t.cutoff&&a<t.cutoff*t.n?e.push("≤"+Math.round(100*t.cutoff)+" %ile"):e.push(Math.round(Math.min(Math.max(1,100*a/t.n),99))+" %ile")}e.length?(r(this,"hidden"),this.innerHTML=e.join(" · ")):(n(this,"hidden"),this.innerHTML="")})),t.find(".pa-grgraph-type").each((function(){var t=[];o.startsWith("cdf")?t.push("CDF"):o.startsWith("pdf")&&t.push("PDF"),d&&!u&&t.push("extension"),h&&!u&&t.push("no extra credit");var e=t.length?" ("+t.join(", ")+")":"";this.innerHTML="grade statistics"+e})),f.highlight_users()}function zt(t){t=t.replace(/^[^#]*/,"");for(var e,a=/([^#=\/]+)[=\/]?([^\/]*)/g,n={};e=a.exec(t);)n[e[1]]=decodeURIComponent(e[2].replace(/\+/g," "));return n}function qt(t){var e=zt(location.hash);for(var a in t)null===t[a]||void 0===t[a]?delete e[a]:e[a]=t[a];var n=function(t){var e=[];for(var a in t)null===t[a]||void 0===t[a]||""===t[a]?e.push(a):e.push(a+"="+encodeURIComponent(t[a]).replace(/%20/g,"+"));return e.sort(),e.length?"#"+e.join("/"):""}(e);n!==location.hash&&f(location.origin+location.pathname+location.search+n)}function Jt(t,e){return jQuery("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e||t.width(),fontSize:t.css("fontSize"),fontFamily:t.css("fontFamily"),fontWeight:t.css("fontWeight"),lineHeight:t.css("lineHeight"),resize:"none","word-wrap":"break-word",whiteSpace:"pre-wrap"}).appendTo(document.body)}Bt.prototype.lower=function(t){for(var e=this.is,a=0,n=e.length;a<n;){var i=a+2*(n-a>>2);if(e[i]>t)n=i;else{if(!(t>e[i+1]))return i;a=i+2}}return a},Bt.prototype.contains=function(t){var e=this.is,a=this.lower(t);return a<e.length&&t>=e[a]},Bt.prototype.overlaps=function(t,e){var a=this.is,n=this.lower(t);return n<a.length&&e>=a[n]},Bt.prototype.add=function(t,e){var a=this.is,n=this.lower(t);(n>=a.length||t<a[n])&&a.splice(n,0,t,t);for(var i=n;i+2<a.length&&e>=a[i+2];)i+=2;i!==n&&a.splice(n+1,i-n),a[n+1]=Math.max(a[n+1],e)},Bt.prototype.clear=function(){this.is=[]},Ut.prototype.numeric_xaxis=function(){var t,e=Math.floor(Math.log10(this.max))+1,a=this.xdw*(e+.5),n=this.gw/a,i=Math.pow(10,Math.max(0,e-2)),r=(this.max-this.min)/i;t=n>4*r&&i>1?i/2:n>2*r?i:n>r*(i<=1?.75:1)?2*i:i>1&&n>.6*r?2.5*i:n>.3*r?5*i:10*i;for(var s,o=Math.floor(this.min/t)*t,l=[],u=!1;o<this.max+t;){var d=o,h=this.xl;if(this.total&&(d>this.total&&d-t<this.total&&!u&&(d=this.total,o-=t),d==this.total&&(u=!0)),o+=t,!(d<this.min)){d>this.max&&(d=this.max);var c=this.xax(d);l.push("M",c,",0v5"),(this.total&&d!=this.total&&Math.abs(c-this.xax(this.total))<a||d!=this.max&&d!=this.total&&Math.abs(c-this.xax(this.max))<a)&&(h=!1),h&&((s=Wt("text")).appendChild(document.createTextNode(d)),s.setAttribute("x",c),s.setAttribute("y",this.xdh+3),this.gx.appendChild(s))}}this.xt&&((s=Wt("path")).setAttribute("d",l.join("")),s.setAttribute("fill","none"),s.setAttribute("stroke","black"),this.gx.appendChild(s))},Ut.prototype.xtics_xaxis=function(){var t=new Bt,e=new Bt,a=[];for(i=0;i!==this.xtics.length;++i)if(xt=this.xtics[i],!(xt.x<this.min||xt.x>this.max)){var n=this.xax(xt.x);if((xt.notic||!e.contains(n))&&(xt.notic||(a.push("M",n,",0v5"),e.add(n-3,n+3)),this.xl&&xt.text)){var r=this.xdw*(xt.label_space||xt.text.length+.5)*.5;if(!t.overlaps(n-r,n+r)){var s=Wt("text");s.appendChild(document.createTextNode(xt.text)),s.setAttribute("x",n),s.setAttribute("y",this.xdh+3),this.gx.appendChild(s),r=this.xdw*(xt.text.length+.5)*.5,t.add(n-r,n+r)}}}this.xt&&((s=Wt("path")).setAttribute("d",a.join("")),s.setAttribute("fill","none"),s.setAttribute("stroke","black"),this.gx.appendChild(s))},Ut.prototype.xaxis=function(){this.xtics?this.xtics_xaxis():this.numeric_xaxis()},Ut.prototype.yaxis=function(){for(var t,e=0,a=[];e<=this.ymax&&this.yl;)(t=Wt("text")).appendChild(document.createTextNode(w(this.yfmt,e))),t.setAttribute("x",-8),t.setAttribute("y",this.yax(e/this.ymax)+.25*this.xdh),this.gy.appendChild(t),a.push("M-5,",this.yax(e/this.ymax),"h5"),e+=this.ylu;this.yt&&((t=Wt("path")).setAttribute("d",a.join("")),t.setAttribute("fill","none"),t.setAttribute("stroke","black"),this.gy.appendChild(t)),this.yltext&&(this.yltext.setAttribute("transform","translate("+(-this.ml+this.xdh)+","+this.yax(.5)+") rotate(-90)"),this.yltext.setAttribute("text-anchor","middle"))},Ut.prototype.container=function(){return $(this.svg).closest(".pa-grgraph")[0]},Ut.prototype.append_cdf=function(t,e){var a,n=Dt(t),i=[],r=1/t.n,s=this.cutoff||0,o=0;if(s)for(;o<n.length&&n[o+1]<s*t.n;)o+=2;for(;o<n.length;o+=2)0!==i.length?(a=Math.max(0,n[o]-Math.min(1,n[o]-n[o-2])/2),i.push("H",this.xax(a))):i.push("M",this.xax(Math.max(0,n[o]-.5)),",",this.yax(s)),i.push("V",this.yax(n[o+1]*r));0!==i.length&&i.push("H",this.xax(n[n.length-2]+.5));var l=Wt("path");return l.setAttribute("d",i.join("")),l.setAttribute("fill","none"),l.setAttribute("class",e),this.gg.appendChild(l),this.last_curve=l,this.last_curve_data=t,l},Ut.prototype.append_pdf=function(t,e){if(0===t.maxp)return null;var a=[],n=t.kde,i=.9/this.maxp,r=this.xax,s=this.yax,o=[0,0,0,0],l=[0,0,0,0],u=[0,0,0,0],d=[0,0,0,0],h=1e-6;function c(t){var e=(t+2)%4,n=(t+3)%4,i=(t+1)%4,r=o[n],s=l[n],c=o[t],p=l[t];if(u[n]>h){var f=2*d[n]+3*u[n]*u[t]+d[t],g=3*u[n]*(u[n]+u[t]);r=(r*f-o[e]*d[t]+o[t]*d[n])/g,s=(s*f-l[e]*d[t]+l[t]*d[n])/g}if(u[i]>h){var m=2*d[i]+3*u[i]*u[t]+d[t],v=3*u[i]*(u[i]+u[t]);c=(c*m-o[i]*d[t]+o[n]*d[i])/v,p=(p*m-l[i]*d[t]+l[n]*d[i])/v}a.push("C",r,s,c,p,o[t],l[t])}for(var p=0;p!==n.length;++p){var f=r(this.min+p*t.binwidth),g=s(n[p]*i);if(0===p)a.push("M",f,g),o[3]=o[0]=f,l[3]=l[0]=g;else{var m=(p+3)%4,v=p%4;o[v]=f,l[v]=g;var b=o[m]-f,x=l[m]-g;if(d[v]=Math.sqrt(b*b+x*x),u[v]=Math.sqrt(d[v]),p>1&&c(m),p===n.length-1){var y=(p+1)%4;o[y]=f,l[y]=g,d[y]=0,u[y]=0,c(v)}}}var w=Wt("path");return w.setAttribute("d",a.join(" ")),w.setAttribute("fill","none"),w.setAttribute("class",e),this.gg.appendChild(w),this.last_curve=w,this.last_curve_data=t.data,w},Ut.prototype.remove_if=function(t){for(var e=this.gg.firstChild;e;){var a=e.nextSibling;t.call(e)&&this.gg.removeChild(e),e=a}},Ut.prototype.highlight_last_curve=function(t,e,i){if(!this.last_curve||!this.last_curve_data.xcdf)return null;var r,s,o,l,u,d,h,c,p=a(this.last_curve,"pa-gg-pdf"),f=this.last_curve_data.xcdf,g=[],m=0;for(s=(r=p?.9/(this.maxp*t.n):1/t.n)*this.gh,o=0;o<f.length;o+=2){for(m+=(d=f[o+1]).length,h=c=0;h<d.length;++h)e(d[h],t)&&++c;c&&(l=this.xax(f[o]),null!=(u=p?Rt.call(this.last_curve,l):this.yax(m*r))&&g.push("M",l,",",u,"v",c*s))}if(g.length){var v=Wt("path");return v.setAttribute("d",g.join("")),v.setAttribute("fill","none"),v.setAttribute("class",i),this.gg.appendChild(v),n(this.gg,"pa-gg-has-hl"),v}return null},Ut.prototype.typed_annotation=function(t){var e=Wt("circle");return e.setAttribute("class","pa-gg-mark hl-"+(t||"main")),e.setAttribute("r",t&&"main"!==t?3.5:5),e},Ut.prototype.star_annotation=function(t,e,a,n){null==e&&(e=Math.PI/2),null==a&&(a=5);var i=Wt("path");i.setAttribute("class",n);for(var r=["M"],s=Math.cos,o=Math.sin,l=Math.PI/a,u=0;u<2*a;++u)r.push(t[1&u]*s(e)," ",t[1&u]*o(e),u?" ":"L"),e+=l;return r.push("z"),i.setAttribute("d",r.join("")),i},Ut.prototype.annotate_last_curve=function(t,e,a){if(this.last_curve){var n=this.xax(t),i=Rt.call(this.last_curve,n);if(null===i&&this.cutoff&&(i=this.yax(this.cutoff)),null!==i)return(e=e||this.typed_annotation()).setAttribute("transform","translate("+n+","+i+")"),this.gg.insertBefore(e,a||null),!0}return!1},Ut.prototype.user_x=function(t){if(this.last_curve_data.xcdf){if(!this.last_curve_data.ucdf)for(var e=this.last_curve_data.xcdf,a=this.last_curve_data.ucdf={},n=0;n!==e.length;n+=2)for(var i=e[n+1],r=0;r!==i.length;++r)a[i[r]]=e[n];return this.last_curve_data.ucdf[t]}},Ut.prototype.highlight_users=function(){if(this.last_curve&&this.last_curve_data.xcdf){this.last_highlight=this.last_highlight||{};for(var t=this.container().attributes,e={},n=0;n!==t.length;++n){if(t[n].name.startsWith("data-pa-highlight"))e[i="data-pa-highlight"===t[n].name?"main":t[n].name.substring(18)]=t[n].value,this.last_highlight[i]=this.last_highlight[i]||""}for(var i in this.last_highlight){var r=e[i]||"";if(this.last_highlight[i]!==r){var s,o={},l=r.split(/\s+/);for(n=0;n!==l.length;++n)""!==l[n]&&(o[l[n]]=1);for(var u,d=this.gg.firstChild,h="pa-gg-mark hl-"+i;d&&(!a(d,"pa-gg-mark")||d.className.animVal<h);)d=d.nextSibling;for(;d&&d.className.animVal===h;){u=d.nextSibling;var c=+d.getAttribute("data-pa-uid");o[c]?o[c]=2:this.gg.removeChild(d),d=u}for(n=0;n!==l.length;++n)if(1===o[l[n]]&&null!=(s=this.user_x(l[n]))){var p=this.typed_annotation(i);p.setAttribute("data-pa-uid",l[n]),this.annotate_last_curve(s,p,d)}this.last_highlight[i]=r}}}},Ut.prototype.hover=function(){var t=this;function e(t,e,a){var n=null;for(var i of t){var r=i.getAttribute("transform").match(/^translate\(([-+\d.]+),([-+\d.]+)\)$/);if(r){var s=+r[1]-e[0],o=+r[2]-e[1],l=s*s+o*o;l<a&&((n=[+r[1],+r[2]]).pathNode=i,a=l)}}return n&&(n.distance=Math.sqrt(a)),n}function a(a){var n={distance:20},i=t.xfmt;if("mousemove"!==a.type&&(t.hoveron="mouseleave"!==a.type),t.hoveron){var r=Ht.event_to_point(t.svg,a),s=t.gg.querySelectorAll(".pa-gg-pdf, .pa-gg-cdf");for(var o of(r[0]-=t.ml,r[1]-=t.mt,s))n=Ht.closestPoint(o,r,n);if(n.pathNode){var l=e(t.gg.querySelectorAll(".pa-gg-mark.hl-main"),n,36)||e(t.gg.querySelectorAll(".pa-gg-mark:not(.hl-main)"),n,25);l&&(n=l,"%.0r"!==i&&"%.1f"!==i||(i="%.2r"))}}var u=t.hoveranno;if(n.pathNode){if(!u){u=t.hoveranno=[t.star_annotation([4,10],null,null,"pa-gg-hover-mark")],t.gg.appendChild(u[0]);var d=Wt("path");d.setAttribute("d","M0,0v5"),d.setAttribute("fill","none"),d.setAttribute("stroke","black"),t.gx.appendChild(d),u.push(d),(d=Wt("rect")).setAttribute("class","pa-gg-hover-box"),d.setAttribute("y",5),d.setAttribute("height",t.xdh+1.5),d.setAttribute("rx",3),t.gx.appendChild(d),u.push(d),(d=Wt("text")).appendChild(document.createTextNode("")),d.setAttribute("class","pa-gg-hover-text"),d.setAttribute("y",t.xdh+3),t.gx.appendChild(d),u.push(d),(d=Wt("text")).appendChild(document.createTextNode("")),d.setAttribute("class","pa-gg-anno-name"),d.setAttribute("text-anchor","end"),d.setAttribute("dx",-8),t.gg.appendChild(d),u.push(d),t.yl&&((d=Wt("path")).setAttribute("d","M-5,0h5"),d.setAttribute("fill","none"),d.setAttribute("stroke","black"),t.gy.appendChild(d),u.push(d),(d=Wt("rect")).setAttribute("class","pa-gg-hover-box"),d.setAttribute("height",t.xdh+1),d.setAttribute("rx",3),t.gy.appendChild(d),u.push(d),(d=Wt("text")).appendChild(document.createTextNode("")),d.setAttribute("class","pa-gg-hover-text"),d.setAttribute("x",-8),t.gy.appendChild(d),u.push(d))}u[0].setAttribute("transform","translate("+n[0]+","+n[1]+")"),u[1].setAttribute("transform","translate("+n[0]+",0)"),u[3].setAttribute("x",n[0]),u[3].firstChild.data=w(i,t.unxax(n[0]));var h,c,p=u[3].getBBox();u[2].setAttribute("x",n[0]-p.width/2-2),u[2].setAttribute("width",p.width+4),n.pathNode.hasAttribute("data-pa-uid")&&(h=$(".gtable").data("paTable"))&&(c=h.name_text(n.pathNode.getAttribute("data-pa-uid")))?(u[4].firstChild.data=c,u[4].setAttribute("x",n[0]),u[4].setAttribute("y",n[1])):u[4].firstChild.data="",t.yl&&(u[5].setAttribute("transform","translate(0,"+n[1]+")"),u[7].setAttribute("y",n[1]+.25*t.xdh),u[7].firstChild.data=w(t.yfmt,t.unyax(n[1])*t.ymax),p=u[7].getBBox(),u[6].setAttribute("x",-p.width-10),u[6].setAttribute("y",n[1]-(t.xdh+2)/2),u[6].setAttribute("width",p.width+4))}else u&&(t.gg.removeChild(u[0]),t.gx.removeChild(u[1]),t.gx.removeChild(u[2]),t.gx.removeChild(u[3]),t.gg.removeChild(u[4]),t.yl&&(t.gy.removeChild(u[5]),t.gy.removeChild(u[6]),t.gy.removeChild(u[7])),t.hoveranno=null)}this.svg.addEventListener("mouseenter",a,!1),this.svg.addEventListener("mousemove",a,!1),this.svg.addEventListener("mouseleave",a,!1)},I.on("js-grgraph-flip",(function(){var t=$(this).closest(".pa-grgraph"),e=(t[0].getAttribute("data-pa-gg-types")||"").split(/ /),n=t[0].getAttribute("data-pa-gg-type"),i=e.indexOf(n);i>=0&&(i=(i+(a(this,"prev")?e.length-1:1))%e.length,t[0].setAttribute("data-pa-gg-type",e[i]),S(!0,"pa-gg-type",e[i]),S(!1,"pa-gg-type",{type:e[i],at:_()}),Qt(t))})),function(){var t=a(document.body,"want-grgraph-hash");function e(t,e,a){var n="data-pa-highlight"+("main"===e?"":"-"+e);a=a||"",$(t).find(".pa-grgraph").each((function(){var t=this.getAttribute(n)||"",i=this;t===a||"main"!==e&&"course"===this.getAttribute("data-pa-pset")||(a?this.setAttribute(n,a):this.removeAttribute(n),window.requestAnimationFrame((function(){var t=$(i).data("paGradeGraph");t&&t.highlight_users()})))}))}function n(t,a){var i,r={},s={},o=!1;for(var l of t.match(/[-\d.]+/g)||[])r[l]=!0;if($(".js-grgraph-highlight-course").each((function(){var t,e=this.getAttribute("data-pa-highlight-range")||"90-100",a=this.getAttribute("data-pa-highlight-type")||"h00";if(s[a]=s[a]||[],this.checked=!!r[e])if(t=e.match(/^([-+]?(?:\d+\.?\d*|\.\d+))-([-+]?(?:\d+\.?\d*|\.\d))(\.?)$/))s[a].push(+t[1],+t[2]+(t[3]?1e-5:0)),o=!0;else{if(!(t=e.match(/^([-+]?(?:\d+\.?\d*|\.\d+))-$/)))throw new Error("bad range");s[a].push(+t[1],1/0),o=!0}})),o)if(i=function(){var t=null;return $(".pa-grgraph[data-pa-pset=course]").each((function(){var e=$(this).data("paGradeData");if(e&&e.all&&e.all.xcdf)return t=e.all.xcdf,!1})),t}())for(var u in s){var d=[];if((r=s[u]).length){for(var h=0;h!==i.length;h+=2)for(var c=0;c!==r.length;c+=2)if(i[h]>=r[c]&&i[h]<r[c+1]){Array.prototype.push.apply(d,i[h+1]);break}d.sort()}e(document.body,u,d.join(" "))}else setTimeout((function(){n(zt(location.hash).hr||"",a+1)}),8<<Math.max(a,230));else for(var u in s)e(document.body,u,"")}function i(t){var a=zt(t);for(var i of(e(document.body,"main",a.hs||""),$("input[type=checkbox].js-grgraph-highlight").prop("checked",!1),(a.hs||"").match(/\d+/g)||[]))$("tr[data-pa-uid="+i+"] input[type=checkbox].js-grgraph-highlight").prop("checked",!0);for(var r of(n(a.hr||"",0),$(".js-grgraph-highlight-course").prop("checked",!1),(a.hr||"").match(/[-\d.]+/g)||[]))$('.js-grgraph-highlight-course[data-pa-highlight-range="'+r+'"]').prop("checked",!0)}I.on("js-grgraph-highlight",(function(a){if("change"===a.type){var n=this.getAttribute("data-range-type"),i=($(this).closest("form").find("input[type=checkbox]"),[]);$(this).closest("form").find("input[type=checkbox]").each((function(){var t;this.getAttribute("data-range-type")===n&&this.checked&&(t=this.closest("tr"))&&t.hasAttribute("data-pa-uid")&&i.push(+t.getAttribute("data-pa-uid"))})),i.sort((function(t,e){return t-e})),t?(qt({hs:i.length?i.join(" "):null}),e(document.body,"main",i.join(" "))):e(this.closest("form"),"main",i.join(" "))}})),I.on("js-grgraph-highlight-course",(function(e){var a=[];$(".js-grgraph-highlight-course").each((function(){this.checked&&a.push(this.getAttribute("data-pa-highlight-range"))})),t&&qt({hr:a.length?a.join(" "):null}),n(a.join(" "),0)})),t&&($(window).on("popstate",(function(t){var e=(t.originalEvent||t).state;e&&e.href&&i(e.href)})).on("hashchange",(function(t){i(location.href)})),$((function(){i(location.href)})))}(),$((function(){var t=document.body.getAttribute("data-now")-(new Date).getTime()/1e3;$(".pa-download-timed").each((function(){var e=this,a=setInterval(n,15e3);function n(){var n,i=+e.getAttribute("data-pa-download-at"),r=+e.getAttribute("data-pa-commit-at"),s=+e.getAttribute("data-pa-download-expiry"),o=(new Date).getTime()/1e3+t;n=o>s?k("%Y/%m/%d %H:%M",i):Math.round((o-i)/60)+" min",r>i&&(n+=" · "+Math.round((r-i)/60)+" min before commit"),$(e).find(".pa-download-timer").text(n),o>s&&clearInterval(a)}n()}))})),I.on("js-repoclip",(function(){var t=document.createTextNode(this.getAttribute("data-pa-repo")),e=F(t,{color:"tooltip",dir:"t"});e.near(this);var a=document.createRange();a.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(a);try{document.execCommand("copy")}catch(t){}window.getSelection().removeAllRanges(),e.remove(),global_tooltip&&global_tooltip.elt==this&&global_tooltip.text(this.getAttribute("data-pa-repo"))})),I.on("pa-anonymized-link",(function(t){var e=this.getAttribute("data-pa-link");t&&t.metaKey?window.open(e):window.location=e})),I.on("js-repositories",(function(t){var e=this;$.ajax(j("api",{fn:"repositories",u:this.getAttribute("data-pa-user")}),{method:"POST",cache:!1,success:function(t){var a="Error loading repositories";if(t.repositories&&t.repositories.length){a="Repositories: ";for(var n=0;n<t.repositories.length;++n){var i=t.repositories[n];n&&(a+=", "),a+='<a href="'+b(i.url)+'">'+b(i.name)+"</a>"}}else t.repositories&&(a="No repositories");$('<div style="font-size:medium;font-weight:normal"></div>').html(a).insertAfter(e)}}),t.preventDefault()})),function(t){var e=null;function a(){for(var t=e.length-1;t>=0;--t)e[t]()}function n(t,a){var n=t.data("autogrower");t.removeData("autogrower"),a&&a.remove();for(var i=e.length-1;i>=0;--i)e[i]===n&&(e[i]=e[e.length-1],e.pop())}t.fn.autogrow=function(){return this.each((function(){var i=t(this),s=i.data("autogrower");r(this,"need-autogrow"),s||("TEXTAREA"===this.tagName?s=function(e){var a,i,r;return function(s){if(!1===s)return n(e,a);var o=e.width();if(!(o<=0)){a||(a=Jt(e,o),i=e.height(),r=a.text("!").height());var l=e[0].value;s&&"keydown"==s.type&&13===s.keyCode&&(l+="\n"),a.css("width",o).text(l+"...");var u=Math.max(t(window).height()-4*r,4*r);e.height(Math.min(u,Math.max(a.height(),i)))}}}(i):"INPUT"===this.tagName&&"text"===this.type&&(s=function(e){var a;return function(i){if(!1===i)return n(e,a);var r,s=0;try{s=e.outerWidth()}catch(t){}if(!(s<=0)){if(!a){a=Jt(e,s);var o=e.css(["paddingRight","paddingLeft","borderLeftWidth","borderRightWidth"]);a.css({width:"auto",display:"table-cell",paddingLeft:o.paddingLeft,paddingLeft:parseFloat(o.paddingRight)+parseFloat(o.paddingLeft)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth)+"px"}),"0px"===(r=e.css(["minWidth","maxWidth"])).minWidth&&e.css("minWidth",s+"px"),"none"!==r.maxWidth||e.hasClass("wide")||e.css("maxWidth","640px")}a.text(e[0].value+"  "),r=e.css(["minWidth","maxWidth"]);var l=Math.min(a.outerWidth(),t(window).width()),u=parseFloat(r.maxWidth);u==u&&(l=Math.min(l,u)),e.outerWidth(Math.max(l,parseFloat(r.minWidth)))}}}(i)),s&&(i.data("autogrower",s).on("change input",s),e||(e=[],t(window).resize(a)),e.push(s))),s&&""!==i.val()&&s()})),this},t.fn.unautogrow=function(){return this.each((function(){var e=t(this).data("autogrower");e&&e(!1)})),this}}(jQuery),$((function(){$(".need-autogrow").autogrow()})),window.$pa={beforeunload:function(t){var e=!0;if($(".pa-gw textarea").each((function(){var t=this.closest(".pa-dl"),n=Z(t);!n||x(this.value,n[1])||a(t,"pa-save-failed")||(e=!1)})),!e)return event.returnValue="You have unsaved notes. You will lose them if you leave the page now."},checklatest:function(){var t,e,a,n=(new Date).getTime();function i(n){!n||!n.hash||n.hash===a||n.snaphash&&n.snaphash===a||(jQuery(".pa-commitcontainer .pa-pd").first().append('<div class="pa-inf-error"><span class="pa-inf-alert">Newer commits are available.</span> <a href="'+j("pset",{u:peteramati_uservalue,pset:e,commit:n.hash})+'">Load them</a></div>'),clearTimeout(t))}(e=jQuery(".pa-commitcontainer").first().attr("data-pa-pset"))&&(a=jQuery(".pa-commitcontainer").first().attr("data-pa-commit"),setTimeout((function r(){var s=(new Date).getTime();t=s-n<=6e4?setTimeout(r,a?1e4:2e3):s-n<=6e5?setTimeout(r,a?2e4:1e4):s-n<=36e5?setTimeout(r,1.25*(s-n)):null,jQuery.ajax(E("api/latestcommit",{u:peteramati_uservalue,pset:e}),{type:"GET",cache:!1,dataType:"json",success:i})}),2e3))},crpfocus:function(e,a,n){var i=t(e);i&&a&&(i.className=i.className.replace(/links[0-9]*/,"links"+a));var r=t(e+(a||"")+"_d");return!r||"text"==r.type&&r.value&&1==n||r.focus(),r&&"text"==r.type&&3==n&&r.select&&r.select(),(i||r)&&window.event&&(window.event.returnValue=!1),n&&n>=1&&window.scroll(0,0),!(i||r)},filediff_markdown:gt,fold:V,gradecdf:function(){var t=this,e=t.getAttribute("data-pa-pset");jQuery.ajax(E("api/gradestatistics",e?{pset:e}:{}),{type:"GET",cache:!0,dataType:"json",success:function(e){e.all&&($(t).data("paGradeData",e),Qt($(t)))}})},onload:z,loadgrades:_t,load_runsettings:Ot.load,pset_actions:function(){var t=$(this);function e(){var e=t.find("select[name='state']").val();t.find(".pa-if-enabled").toggleClass("hidden","disabled"===e),t.find(".pa-if-visible").toggleClass("hidden","disabled"===e||"invisible"===e)}e(),t.find("select[name='state']").on("change",e),t.find("input, select").on("change",(function(){t.find("[type='submit']").addClass("alert")})),t.removeClass("need-pa-pset-actions")},render_text_page:X.on_page,render_pset_table:function(t,e){var i,o,l,u,d,h,c,p,f,g,m,v=$(this),x=0,y=[],A=null,_=t.flagged_commits,C=t.grades_visible,M={f:_?"at":"username",last:!0,rev:1},T=-1,N=null,L=t.anonymous,I={checkbox:{th:'<th class="gt-checkbox" scope="col"></th>',td:function(t,e){return""==e?"<td></td>":'<td class="gt-checkbox"><input type="checkbox" name="'+J(t)+'" value="1" class="'+(this.className||"uic js-range-click papsel")+'" data-range-type="s61"></td>'},tw:1.5},rownumber:{th:'<th class="gt-rownumber" scope="col"></th>',td:function(t,e){return""==e?"<td></td>":'<td class="gt-rownumber">'+e+".</td>"},tw:.75*Math.ceil(Math.log10(Math.max(e.length,1)))+1},pset:{th:'<th class="gt-pset l plsortable" data-pa-sort="pset" scope="col">Pset</th>',td:function(t){return'<td class="gt-pset"><a href="'+H(t)+'" class="track">'+b(peteramati_psets[t.psetid].title)+(t.hash?"/"+t.hash.substr(0,7):"")+"</a></td>"},tw:12},at:{th:'<th class="gt-at l plsortable" data-pa-sort="at" scope="col">Flagged</th>',td:function(t){return'<td class="gt-at">'+(t.at?k("%#e %b %#k:%M",t.at):"")+"</td>"},tw:8},username:{th:function(){var e='<span class="heading">'+(L||!M.email?"Username":"Email")+"</span>";return t.anonymous&&t.can_override_anonymous?e+=' <a href="" class="uu n js-switch-anon">[anon]</a>':t.anonymous&&(e+=' <span class="n">[anon]</span>'),'<th class="gt-username l plsortable" data-pa-sort="username" scope="col">'+e+"</th>"},td:function(t){return'<td class="gt-username">'+Q(t)+"</td>"},tw:12,pin:!0},name:{th:function(){return'<th class="gt-name l plsortable" data-pa-sort="name" scope="col">Name</th>'},td:function(t){return'<td class="gt-name">'+q(t,!1)+"</td>"},tw:14},name2:{th:function(){var e='<span class="heading">'+(L?"Username":"Name")+"</span>";return t.anonymous&&t.can_override_anonymous&&(e+=' <a href="" class="uu n js-switch-anon">[anon]</a>'),'<th class="gt-name2 l plsortable" data-pa-sort="name2" scope="col">'+e+"</th>"},td:function(t){return'<td class="gt-name2">'+q(t,!0)+"</td>"},tw:14},extension:{th:'<th class="gt-extension l plsortable" data-pa-sort="extension" scope="col">X?</th>',td:function(t){return'<td class="gt-extension">'+(t.x?"X":"")+"</td>"},tw:2},grader:{th:'<th class="gt-grader l plsortable" data-pa-sort="grader" scope="col">Grader</th>',td:function(t){var e=t.gradercid?"???":"";return t.gradercid&&siteinfo.pc[t.gradercid]&&(e=V(siteinfo.pc[t.gradercid])),'<td class="gt-grader">'+e+"</td>"},tw:6},notes:{th:'<th class="gt-notes l plsortable" data-pa-sort="gradestatus" scope="col">⎚</th>',td:function(t){var e="";return t.grades_visible&&(e+="⎚"),_&&t.is_grade&&(e+="✱"),t.has_notes&&(e+="♪"),!_&&t.has_nongrader_notes&&(e+="<sup>*</sup>"),'<td class="gt-notes">'+e+"</td>"},tw:2},conversation:{th:'<th class="gt-conversation l" scope="col">Flag</th>',td:function(t){return'<td class="gt-conversation l">'+b(t.conversation||t.conversation_pfx||"")+(t.conversation_pfx?"…":"")+"</td>"},tw:20},gdialog:{th:"<th></th>",td:function(t){return'<td><a href="" class="ui x js-gdialog" tabindex="-1" scope="col">Ⓖ</a></td>'},tw:1.5,pin:!0},total:{th:'<th class="gt-total r plsortable" data-pa-sort="total" scope="col">Tot</th>',td:function(t){return'<td class="gt-total r">'+t.total+"</td>"},tw:3},grade:{th:function(){return'<th class="'+("right"===this.justify?"gt-grade r":"gt-grade l")+' plsortable" data-pa-sort="grade'+this.gidx+'" scope="col">'+this.gabbr+"</th>"},td:function(t,e,a){var n=t.grades[this.gidx],i=b(this.typeinfo.tcell.call(this.ge,n));if(a)return i;var r='<td class="'+this.klass;return t.highlight_grades&&t.highlight_grades[this.gkey]&&(r+=" gt-highlight"),r+'">'+i+"</td>"},tw:function(){var e=0;if(this.klass=this.gkey===t.total_key?"gt-total":"gt-grade","right"===this.justify&&(this.klass+=" r"),"select"===this.typeinfo.type){this.klass+=" gt-el";for(var a=0;a!==this.ge.options.length;++a)e=Math.max(e,this.ge.options[a].length);e=Math.floor(1.25*Math.min(e,10))/2}else e=3;return Math.max(e,.5*this.gabbr.length+1.5)}},ngrades:{th:'<th class="gt-ngrades r plsortable" data-pa-sort="ngrades" scope="col">#G</th>',td:function(t){return'<td class="gt-ngrades r">'+(t.ngrades_nonempty||"")+"</td>"},tw:2},repo:{th:'<th class="gt-repo" scope="col"></th>',td:function(t){var e;return e=t.repo?L?'<a href="" data-pa-link="'+b(t.repo)+'" class="ui pa-anonymized-link">repo</a>':'<a class="track" href="'+b(t.repo)+'">repo</a>':"",t.repo_broken&&(e+=' <strong class="err">broken</strong>'),t.repo_unconfirmed&&(e+=' <strong class="err">unconfirmed</strong>'),t.repo_too_open&&(e+=' <strong class="err">open</strong>'),t.repo_handout_old&&(e+=' <strong class="err">handout</strong>'),t.repo_partner_error&&(e+=' <strong class="err">partner</strong>'),t.repo_sharing&&(e+=' <strong class="err">sharing</strong>'),'<td class="gt-repo">'+e+"</td>"},tw:10}};function D(t){return function(){return t}}function R(){"name"!==M.f&&"name2"!==M.f&&"username"!==M.f&&"email"!==M.f&&null!=M.nameflag||(M.nameflag=0,"name"!==M.f&&"name2"!==M.f||(M.nameflag|=1),M.last&&(M.nameflag|=2),M.email&&(M.nameflag|=4),L&&(M.nameflag|=8))}function F(t){return L&&t.anon_username||t.username||""}function W(e){var a={u:F(e),pset:e.psetid?peteramati_psets[e.psetid].urlkey:t.key};return!e.hash||e.is_grade&&!_?e.gradehash&&(a.commit=e.gradehash,a.commit_is_grade=1):a.commit=e.hash,a}function H(t){return b(j("pset",W(t)))}function U(t,e){return'<a href="'.concat(H(e),'" class="track',e.dropped?' gt-dropped">':'">',t,"</a>")}function Q(t){var e;return e=L&&t.anon_username?t.anon_username:M.email&&t.email?t.email:t.username||"",U(b(e),t)}function z(t,e){return null!=t.first&&null!=t.last?e?t.last.concat(", ",t.first):t.first.concat(" ",t.last):null!=t.first?t.first:null!=t.last?t.last:""}function q(t,e){var a=b(e&&L?t.anon_username||"?":z(t,N));return e?U(a,t):a}function J(t){var e=L&&t.anon_username||t.username;return"s:"+encodeURIComponent(e).replace(/\./g,"%2E")}function V(t){return t.__nickname||(t.nick?t.__nickname=t.nick:t.nicklen||t.lastpos?t.__nickname=t.name.substr(0,t.nicklen||t.lastpos-1):t.__nickname=t.name),t.__nickname}function K(t){var i,s,o=t.children("tbody"),l=t.children("thead")[0].firstChild.childNodes.length,u=o[0],d=function(t){for(var e={},a=t.find("tbody")[0].firstChild,n=null;a;)a.hasAttribute("data-pa-partner")?n.push(a):e[a.getAttribute("data-pa-spos")]=n=[a],a=a.nextSibling;return e}(t),h=0,c=!1,p=u.firstChild;for(i=0;i!==e.length;++i){for(var f=e[i];(s=p)&&"gt-boring"===s.className;)p=p.nextSibling,u.removeChild(s);f.boringness!==c&&!1!==c&&u.insertBefore($('<tr class="gt-boring"><td colspan="'+l+'"><hr></td></tr>')[0],p),c=f.boringness;var g=d[f._spos];for(s=0;s<g.length;++s)p!==g[s]?u.insertBefore(g[s],p):p=p.nextSibling,r(g[s],"k"+(1-h%2)),n(g[s],"k"+h%2);++h}h=0;o.find(".gt-rownumber").html((function(){return++h+"."}));var m=M.f&&M.last;m!==N&&(N=m,o.find(".gt-name, .gt-name2").html((function(){return q(y[this.parentNode.getAttribute("data-pa-spos")],a(this,"gt-name2"))})))}function X(){for(var t=[],a=0;a!==e.length;++a)t.push(F(e[a]));l.value=t.join(" ")}function G(){K(v),A&&K(A),l&&X(),S.site(!0,"pa-pset"+t.id+"-table",JSON.stringify(M))}function Y(){for(var t={},e=v.find("tbody")[0].firstChild;e;)t[e.getAttribute("data-pa-uid")]=e,e=e.nextSibling;return t}function Z(){var t=A?$([v[0],A[0]]):v;t.find("td.gt-username").each((function(){var t=y[this.parentNode.getAttribute("data-pa-spos")];$(this).html(Q(t))})),t.find("th.gt-username > span.heading").html(L||!M.email?"Username":"Email"),t.find("td.gt-name2").each((function(){var t=y[this.parentNode.getAttribute("data-pa-spos")];$(this).html(q(t,!0))})),t.find("th.gt-name2 > span.heading").html(L?"Username":"Name")}function tt(){v.toggleClass("gt-anonymous",!!L),x&&o&&(v.css("width",x-(L?o.width:0)+"px"),$(v[0].firstChild).find(".gt-name").css("width",(L?0:o.width)+"px"))}function et(t){(L=!L)||(M.override_anonymous=!0),tt(),Z(),v.find("tbody input.gt-check").each((function(){var t=y[this.parentNode.parentNode.getAttribute("data-pa-spos")];this.setAttribute("name",J(t))})),st(),G(),v.closest("form").find("input[name=anonymous]").val(L?1:0),t.preventDefault(),t.stopPropagation()}function at(t,e){return t._sort_user<e._sort_user?-M.rev:t._sort_user==e._sort_user?0:M.rev}function it(t,e){var a=t.gradercid?siteinfo.pc[t.gradercid]:null,n=e.gradercid?siteinfo.pc[e.gradercid]:null,i=a&&V(a)||"~~~",r=n&&V(n)||"~~~";return i!=r?i<r?-M.rev:M.rev:0}function st(){var t,a=M.f,n=M.rev;if(function(){if(M.nameflag!==T){T=M.nameflag;for(var t=0;t<e.length;++t)e[t]._sort_user=(a=e[t],n=void 0,n="",8&T&&a.anon_username?n=a.anon_username+" ":1&T&&(n=z(a,2==(2&T))+" "),4&T&&a.email?n+=a.email:n+=a.username||"",null!=a.psetid&&(n+=w(" %5d",a.psetid)),null!=a.at&&(n+=w(" %11g",a.at)),n.toLowerCase())}var a,n}(),"name"!==a&&"name2"!==a||L)if("extension"===a)e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:t.x!=e.x?t.x?n:-n:at(t,e)}));else if("grader"===a)e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:it(t,e)||at(t,e)}));else if("gradestatus"===a)e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:t.grades_visible!=e.grades_visible?t.grades_visible?-1:1:t.has_notes!=e.has_notes?t.has_notes?-1:1:it(t,e)||at(t,e)}));else if("pset"===a)e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:t.psetid!=e.psetid?peteramati_psets[t.psetid].pos<peteramati_psets[e.psetid].pos?-n:n:t.pos<e.pos?-n:n}));else if("at"===a)e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:t.at!=e.at?t.at<e.at?-n:n:t.pos<e.pos?-n:n}));else if("total"===a)e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:t.total!=e.total?t.total<e.total?-n:n:-at(t,e)}));else if((t=/^grade(\d+)$/.exec(a))&&h[+t[1]]){var i=+t[1],r=h[i].type&&"forward"===rt[h[i].type].sort,s=r?-n:n;e.sort((function(t,e){if(t.boringness!==e.boringness)return t.boringness-e.boringness;var a=t.grades&&t.grades[i],o=e.grades&&e.grades[i];return""===a||null==a||""===o||null==o?""!==a&&null!=a?s:""!==o&&null!=o?-s:-at(t,e):a<o?-n:a>o?n:r?at(t,e):-at(t,e)}))}else"ngrades"===a&&p?e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:t.ngrades_nonempty!==e.ngrades_nonempty?t.ngrades_nonempty<e.ngrades_nonempty?-n:n:-at(t,e)})):M.email&&!L?(a="username",e.sort((function(t,e){if(t.boringness!==e.boringness)return t.boringness-e.boringness;var a=(t.email||"").toLowerCase(),i=(e.email||"").toLowerCase();return a!==i?""===a||""===i?""===a?n:-n:a<i?-n:n:at(t,e)}))):("name2"!==a&&(a="username"),e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:at(t,e)})));else e.sort((function(t,e){return t.boringness!==e.boringness?t.boringness-e.boringness:at(t,e)}));var o=A?$([v[0].firstChild,A[0].firstChild]):$(v[0].firstChild);o.find(".plsortable").removeClass("plsortactive plsortreverse"),o.find("th[data-pa-sort='"+a+"']").addClass("plsortactive").toggleClass("plsortreverse",M.rev<0)}function ot(t){if(this.hasAttribute("data-pa-sort")){var e,a=this.getAttribute("data-pa-sort");a!==M.f?(M.f=a,"username"===a||"name"===a||"name2"===a||"grader"===a||"extension"===a||"pset"===a||"at"===a||(e=a.match(/^grade(\d+)$/))&&h[e[1]].type&&"forward"===rt[h[e[1]].type].sort?M.rev=1:M.rev=-1):"name"===a||"name2"===a&&!L?(M.rev=-M.rev,1===M.rev&&(M.last=!M.last)):"username"===a?(-1!==M.rev||L||(M.email=!M.email,Z()),M.rev=-M.rev):M.rev=-M.rev,R(),st(),G()}}function ut(){s(this.closest(".pa-pd"),"pa-grade-changed",this.hasAttribute("data-pa-unmixed")||P(this))}function dt(e,a,n){for(var i=e[a.uid],r=y[i.getAttribute("data-pa-spos")],s=0,o=0;o!==n.length;++o){var l,u=n[o],d=t.grades.entries[u];d&&(l=f[d.colpos])&&(r.grades[d.pos]!==a.grades[o]&&(r.grades[d.pos]=a.grades[o],i.childNodes[d.colpos].innerText=l.td.call(l,r,null,!0)),null!=a.grades[o]&&""!==a.grades[o]&&++s)}a.total!==r.total&&(r.total=a.total,g&&(i.childNodes[g].innerText=r.total)),s!==r.ngrades_nonempty&&(r.ngrades_nonempty=s,m&&(i.childNodes[m].innerText=r.ngrades_nonempty||""))}function ct(t){u.find(".has-error").removeClass("has-error"),t.ok?u.find(".pa-messages").html(""):(u.find(".pa-messages").html(O(2,b(t.error))),t.errf&&u.find(".pa-gradevalue").each((function(){t.errf[this.name]&&n(this,"has-error")})))}function pt(e){var a=!1,n={};if(u.find(".pa-gradevalue").each((function(){if((this.hasAttribute("data-pa-unmixed")||P(this))&&!this.indeterminate){var e,i=this.name,r=t.grades.entries[i];e="checkbox"===this.type?this.checked?this.value:"":$(this).val();for(var s=0;s!==d.length;++s){var o=d[s];n[o.uid]=n[o.uid]||{grades:{},oldgrades:{}},n[o.uid].grades[i]=e,n[o.uid].oldgrades[i]=o.grades[r.pos]}a=!0}})),a)if(1===d.length)nt(E("api/grade",W(d[0])),n[d[0].uid]).then((function(t){ct(t),t.ok&&(dt(Y(),t,t.order),e())}));else{for(var i=0;i!==d.length;++i)d[i].gradehash&&(n[d[i].uid].commit=d[i].gradehash,n[d[i].uid].commit_is_grade=1);nt(E("api/multigrade",{pset:t.key}),{us:JSON.stringify(n)}).then((function(t){if(ct(t),t.ok){var a=Y();for(var n in t.us)dt(a,t.us[n],t.order);e()}}))}else e()}function ft(){var t=this.getAttribute("data-pa-spos");pt((function(){mt([t])}))}function gt(){r(this,"has-error")}function mt(e){d=[];for(var a=0;a!==e.length;++a)d.push(y[e[a]]);u.find("h2").html(b(t.title)+" : "+d.map((function(t){return b(L?t.anon_username:t.username||t.email)})).join(", "));var n=1===d.length?d[0]:null;if(n){var i=(n.first||n.last?n.first+" "+n.last+" ":"")+"<"+n.email+">";u.find(".gt-name-email").html(b(i)).removeClass("hidden")}else u.find(".gt-name-email").addClass("hidden");if(u.find(".pa-gradelist").toggleClass("pa-pset-hidden",!!d.find((function(t){return!t.grades_visible}))),u.find(".pa-grade").each((function(){for(var e=this.getAttribute("data-pa-grade"),a=t.grades.entries[e],n=d[0].grades[a.pos],i=!1,r=1;r!==d.length;++r){var s=d[r].grades[a.pos];s===n||null==s&&""===n||""===s&&null==n||(i=!0)}i?ht.call(this,a,null,null,{reset:!0,mixed:!0}):ht.call(this,a,n,null,{reset:!0})})),n){for(var r,s=v.find("tbody")[0].firstChild;s&&s.getAttribute("data-pa-spos")!=n._spos;)s=s.nextSibling;for(r=s;r&&(r===s||!r.hasAttribute("data-pa-spos"));)r=r.previousSibling;for(u.find("button[name=prev]").attr("data-pa-spos",r?r.getAttribute("data-pa-spos"):"").prop("disabled",!r),r=s;r&&(r===s||!r.hasAttribute("data-pa-spos"));)r=r.nextSibling;u.find("button[name=next]").attr("data-pa-spos",r?r.getAttribute("data-pa-spos"):"").prop("disabled",!r)}}function vt(t){!t.ctrlKey||"n"!==t.key&&"p"!==t.key||!($b=u.find("button[name="+("n"===t.key?"next":"prev")+"]"))||$b[0].disabled?"Return"===t.key||"Enter"===t.key?(pt((function(){u.close()})),t.stopImmediatePropagation(),t.preventDefault()):"Esc"===t.key||"Escape"===t.key?(t.stopImmediatePropagation(),u.close()):"Backspace"===t.key&&this.hasAttribute("placeholder")&&bt.call(this):(ft.call($b[0]),t.stopImmediatePropagation(),t.preventDefault())}function bt(){this.hasAttribute("placeholder")&&(this.setAttribute("data-pa-unmixed",1),this.removeAttribute("placeholder"),ut.call(this))}function xt(){var t=B();t.push("<h2></h2>"),L||t.push('<strong class="gt-name-email"></strong>'),t.push('<div class="pa-messages"></div>'),t.push('<div class="pa-gradelist in-modal">',"</div>");for(var e=0;e!==h.length;++e)t.push(lt(h[e],!0,!1));t.pop(),t.push_actions(),t.push('<button type="button" name="bsubmit" class="btn-primary">Save</button>'),t.push('<button type="button" name="cancel">Cancel</button>'),t.push('<button type="button" name="prev" class="btnl">&lt;</button>'),t.push('<button type="button" name="next" class="btnl">&gt;</button>'),(u=t.show(!1)).children(".modal-dialog").addClass("modal-dialog-wide");var a=v.find(".papsel:checked").toArray().map((function(t){return t.parentElement.parentElement.getAttribute("data-pa-spos")})),n=this.closest("tr").getAttribute("data-pa-spos");a.indexOf(n)<0?mt([n]):(u.find("button[name=prev], button[name=next]").prop("disabled",!0).addClass("hidden"),mt(a)),u.on("change blur",".pa-gradevalue",ut),u.on("input change",".pa-gradevalue",gt),u.on("keydown",vt),u.on("keydown","input, textarea, select",vt),u.on("input","input, textarea, select",bt),u.find("button[name=bsubmit]").on("click",(function(){pt((function(){u.close()}))})),u.find("button[name=prev], button[name=next]").on("click",ft),t.show()}function yt(){for(var t=0;t!==f.length&&!f[t].pin;++t);var e=$('<div style="position:absolute;left:0;top:0;bottom:0;width:'+(f[t].left-10)+'px;pointer-events:none"></div>').prependTo(v.parent())[0],n=!1,i=!1;var s=new IntersectionObserver((function(t){for(var s of t)s.target===e?i=s.isIntersecting:n=s.isIntersecting;!n||i||A?n&&i&&A&&(A.parent().remove(),A=null):function(){var t,e,n,i=0,s=[];for(t=0;t!==f.length&&!f[t].pin;++t);for(e=t;e!==f.length&&f[e].pin;++e)i+=f[e].width;for(d='<table class="gtable gtable-fixed gtable-overlay new" style="position:absolute;left:-24px;width:'+(i+24)+'px"><thead><tr class="k0 kfade"><th style="width:24px"></th>',n=t;n!==e;++n)d+='<th style="width:'+f[n].width+'px"'+f[n].th.call(f[n]).substring(3);A=$(d+"</thead><tbody></tbody></table>");var o=v[0].firstChild.firstChild,l=A[0].firstChild.firstChild;for(n=t;n!==e;++n)l.childNodes[n-t+1].className=o.childNodes[n].className;for(v[0].parentNode.prepend($('<div style="position:sticky;left:0;z-index:2"></div>').append(A)[0]),A.find("thead").on("click","th",ot),A.find(".js-switch-anon").click(et),o=v.children("tbody")[0].firstChild;o;){if(a(o,"gt-boring"))s.push('<tr class="gt-boring"><td colspan="'+(e-t+1)+'"><hr></td></tr>');else{var u=o.getAttribute("data-pa-spos"),d='<tr class="'+o.className+' kfade" data-pa-spos="'+u;for(o.hasAttribute("data-pa-uid")&&(d+='" data-pa-uid="'+o.getAttribute("data-pa-uid")),o.hasAttribute("data-pa-partner")&&(d+='" data-pa-partner="1'),d+='"><td></td>',n=t;n!==e;++n)d+='<td style="height:'+o.childNodes[n].clientHeight+'px"'+f[n].td.call(f[n],y[u],"").substring(3);s.push(d+"</tr>")}o=o.nextSibling}A.find("tbody").html(s.join("")),setTimeout((function(){A&&r(A[0],"new")}),0)}()}));s.observe(e),s.observe(v.parent()[0])}function wt(t,e){for(var a=[],n=0;n!==f.length;++n)a.push(f[n].td.call(f[n],t,e));return a}v.parent().on("click","a.js-gdialog",(function(t){xt.call(this),t.preventDefault()})),function(){var a=S.site(!0,"pa-pset"+t.id+"-table");a&&(M=JSON.parse(a)),M.f&&/^\w+$/.test(M.f)||(M.f="username"),1!==M.rev&&-1!==M.rev&&(M.rev=1),L&&t.can_override_anonymous&&M.override_anonymous||delete M.override_anonymous,L&&M.override_anonymous&&(L=!1),null==M.nameflag&&R(),h=[],c=[];var n=[];if(t.grades)for(var r={},s=[],u=0;u!==t.grades.order.length;++u){var d=t.grades.order[u],b=t.grades.entries[d];if("text"!==b.type){h.push(b),c.push(d);var x=b.title||d;s.push(x);var y=x.match(/^(p)(?:art\s*|(?=\d))([-.a-z\d]+)(?:[\s:]+|$)/i);if(y=(y=y||x.match(/^(q)(?:uestion\s*|(?=\d))([-.a-z\d]+)(?:[\s:]+|$)/i))||x.match(/^[\s:]*()(\S{1,3}[\d.]*)[^\s\d]*[\s:]*/)){for(var w,A=y[1]+y[2],k=x.substring(y[0].length);w=r[A];){if(!0!==w&&(y=w[1].match(/^(\S{1,3}[\d.]*)\S*[\s:]*(.*)$/))&&(n[w[0]]+=y[1],r[n[w[0]]]=[w[0],y[2]],r[A]=w=!0),!(y=k.match(/^(\S{1,3}[\d.]*)[^\s\d]*[\s:]*(.*)$/))){!0!==w&&(A+=":"+c.length);break}A+=y[1],k=y[2]}n.push(A),r[A]=[c.length-1,k]}else n.push(":"+c.length)}}var T=-1;for(u=0;u<e.length;++u){var N=e[u];N.dropped?N.boringness=2:N.gradehash||t.gitless_grades?N.boringness=0:N.boringness=1;for(var j=0,E=0;E<c.length;++E)c[E]!=t.total_key&&null!=N.grades[E]&&""!==N.grades[E]&&++j;N.ngrades_nonempty=j,-1===T?T=j:T!==j&&(!N.boringness||j>0)&&(T=-2)}if(p=-2===T,t.col)f=t.col;else{for(f=[],t.checkbox&&f.push("checkbox"),f.push("rownumber"),_?(f.push("pset"),f.push("at")):f.push("gdialog"),f.push("username","name","extension","grader"),_&&f.push("conversation"),(_||!t.gitless_grades||C)&&f.push("notes"),t.need_total&&(g=f.length,f.push("total")),u=0;u!==c.length;++u){var O=h[u].type,P=rt[O||"numeric"];h[u].colpos=f.length,f.push({type:"grade",gidx:u,gkey:c[u],gabbr:n[u],ge:h[u],typeinfo:P,justify:P.justify||"right"})}p&&(m=f.length,f.push("ngrades")),t.gitless||f.push("repo")}for(u=0;u!==f.length;++u)"string"==typeof f[u]&&(f[u]={type:f[u]}),f[u].index=u,Object.assign(f[u],I[f[u].type]),"string"==typeof f[u].th&&(f[u].th=D(f[u].th)),"username"!==f[u].type||i||(i=f[u]),"name"!==f[u].type||o||(o=f[u]);v[0].closest("form")&&(l=$('<input name="slist" type="hidden" value="">')[0],v.after(l))}(),function(){for(var a=$('<thead><tr class="k0"></tr></thead>')[0],n=v.hasClass("want-gtable-fixed"),i=parseFloat(window.getComputedStyle(document.documentElement).fontSize),r=0;r!==f.length;++r){var s=f[r].th.call(f[r]),o=$(s);if(n){f[r].left=x;var u=f[r].tw;"number"!=typeof u&&(u=u.call(f[r])),u*=i,f[r].width=u,o.css("width",u+"px"),x+=u}a.firstChild.appendChild(o[0])}tt(),v[0].appendChild(a),v.toggleClass("gt-useemail",!!M.email),v.find("thead").on("click","th",ot),v.find(".js-switch-anon").click(et),n&&v.removeClass("want-gtable-fixed").css("table-layout","fixed");var d=$('<tbody class="has-hotlist"></tbody>')[0],h=0,c=0,p=[];for(v[0].appendChild(d),t.no_sort||st(),N="name"===M.f&&M.last,r=0;r!==e.length;++r){var g=e[r];g._spos=y.length,y.push(g),++h,g.boringness!==c&&1!=h&&p.push('<tr class="gt-boring"><td colspan="'+f.length+'"><hr></td></tr>'),c=g.boringness;var m=wt(g,h),b='<tr class="k'+h%2+'" data-pa-spos="'+g._spos;g.uid&&(b+='" data-pa-uid="'+g.uid),p.push(b+'">'+m.join("")+"</tr>");for(var w=0;g.partners&&w<g.partners.length;++w){var A=g.partners[w];A._spos=y.length,y.push(A);for(var _=wt(g.partners[w],""),k=0;k<_.length;++k)_[k]===m[k]&&(_[k]="<td></td>");b='<tr class="k'+h%2+' gtrow-partner" data-pa-spos="'+A._spos,A.uid&&(b+='" data-pa-uid="'+A.uid),p.push(b+'" data-pa-partner="1">'+_.join("")+"</tr>")}p.length>50&&($(p.join("")).appendTo(d),p=[])}0!==p.length&&$(p.join("")).appendTo(d),l&&X(),n&&window.IntersectionObserver&&yt()}(),v.data("paTable",{name_text:function(t){var e,a=v.find("tr[data-pa-uid="+t+"]").attr("data-pa-spos");return a?(e=y[a])?(L?e.anon_username:z(e,N))||"?":"[none]":null}}),v.children("tbody").on("pa-hotlist",(function(a){for(var n=[],i=0;i<e.length;++i){var r=e[i],s="~".concat(encodeURIComponent(F(r)));_&&(s=s.concat("/pset/",peteramati_psets[r.psetid].urlkey),r.hash&&(s=s.concat("/",r.hash))),n.push(s)}a.hotlist={pset:_?null:t.key,items:n}}))},runmany:function t(){var e=jQuery("#runmany61"),a=e.closest("form");if(a.prop("unload61")||(jQuery(window).on("beforeunload",(function(){if(a.prop("outstanding")||jQuery("#runmany61_users").text())return"Several server requests are outstanding."})),a.prop("unload61","1")),!a.prop("outstanding")){for(var n,i=jQuery("#runmany61_users").text().split(/[\s,;]+/);!n&&i.length;)n=i.shift();if(!n)return jQuery("#runmany61_who").text("<done>"),void jQuery("#runmany61_users").text("");jQuery("#runmany61_who").text(n),a.find("[name='u']").val(n),jQuery("#runmany61_users").text(i.join(" "));var r=jQuery('<a href="'+siteinfo.site_relative+"~"+encodeURIComponent(n)+"/pset/"+a.find("[name='pset']").val()+'" class="q ansib ansifg7"></a>');r.text(n),Lt(e[0],{noclear:!0,headline:r[0]})}setTimeout(t,10)}}}();
//# sourceMappingURL=pa.min.js.map
